import {
  t as t2
} from "./chunk-R4LVTHN4.js";
import {
  t as t3
} from "./chunk-JR3QCJ2M.js";
import {
  n as n4
} from "./chunk-VYGC2LVC.js";
import {
  a as a5,
  n as n5
} from "./chunk-VHPS7AS5.js";
import {
  d as d3
} from "./chunk-GH3XG2RA.js";
import "./chunk-3ESTI2X4.js";
import {
  f as f3,
  i as i2,
  s as s7
} from "./chunk-YK2WEG7V.js";
import {
  e as e4
} from "./chunk-D62N45BQ.js";
import {
  W,
  e2 as e3,
  t
} from "./chunk-N34PJZVR.js";
import {
  n as n2
} from "./chunk-FQVGAALF.js";
import {
  L,
  T,
  k
} from "./chunk-DOLURTZY.js";
import "./chunk-5UQMANML.js";
import "./chunk-PZHYCIRU.js";
import "./chunk-5EXFDBQJ.js";
import {
  i as i3
} from "./chunk-GVQH342Z.js";
import {
  s as s5
} from "./chunk-POEWD5LS.js";
import {
  h as h2
} from "./chunk-HTVQN75V.js";
import {
  a as a4
} from "./chunk-W3WHCGIQ.js";
import {
  a as a3,
  h,
  j as j3,
  l as l3
} from "./chunk-HPWZ2OON.js";
import {
  h as h3
} from "./chunk-WAPUHORU.js";
import {
  k as k2
} from "./chunk-HXDFHMRK.js";
import {
  S2 as S,
  m as m2,
  m3,
  n as n3
} from "./chunk-5HSVWQOA.js";
import "./chunk-C2BBLDPU.js";
import "./chunk-GWA3PLGA.js";
import "./chunk-FXWSVUF2.js";
import "./chunk-CNS4YGGN.js";
import "./chunk-DOQ3SAAR.js";
import "./chunk-UHAU5IXU.js";
import "./chunk-3U2FS2TT.js";
import {
  f as f2
} from "./chunk-CEXY22SC.js";
import "./chunk-ODFH3BSN.js";
import {
  s as s6
} from "./chunk-7JNPZC53.js";
import "./chunk-ZXXKE5XP.js";
import "./chunk-MATER45R.js";
import "./chunk-6UW2VZVV.js";
import {
  V
} from "./chunk-GAARA5JM.js";
import "./chunk-Y2CLYMXQ.js";
import "./chunk-EHNCW2SL.js";
import "./chunk-HIPTG7BJ.js";
import "./chunk-REPJV7SP.js";
import "./chunk-F42HXUMI.js";
import "./chunk-BAMKEIAF.js";
import "./chunk-CZNLCEZN.js";
import {
  j as j5
} from "./chunk-UNJDKTFU.js";
import "./chunk-DH42JQZX.js";
import "./chunk-674HAVOZ.js";
import "./chunk-MHGDFNBE.js";
import {
  n
} from "./chunk-J2V5CZSS.js";
import "./chunk-7D57YBLP.js";
import {
  s as s4
} from "./chunk-JZM5YUHA.js";
import {
  j as j4
} from "./chunk-ZF5PVI2P.js";
import "./chunk-EQK73KLU.js";
import "./chunk-OBGBLQQX.js";
import {
  j as j2
} from "./chunk-FXYPEAR7.js";
import "./chunk-V3CNLYUD.js";
import "./chunk-TEHNQYQD.js";
import "./chunk-TPJLFGOT.js";
import "./chunk-CQX57DED.js";
import "./chunk-3CQBBMMD.js";
import {
  M
} from "./chunk-T35GN7EL.js";
import {
  d as d2,
  f,
  x2 as x
} from "./chunk-7U6V6KY2.js";
import {
  H
} from "./chunk-NFY4EX6G.js";
import "./chunk-GJ7PJ7XG.js";
import "./chunk-ULGEYK3G.js";
import "./chunk-F3KGLZDZ.js";
import {
  l as l2
} from "./chunk-CHTUPHTO.js";
import {
  m,
  y
} from "./chunk-453UIKKW.js";
import {
  a2
} from "./chunk-5BLDWPLW.js";
import {
  e
} from "./chunk-PD5Q7TDW.js";
import {
  d
} from "./chunk-7G6CKDLW.js";
import "./chunk-FFUMVAL2.js";
import "./chunk-3JQ6N63Z.js";
import "./chunk-U3J7253Q.js";
import "./chunk-FWH3QSBQ.js";
import "./chunk-2UENN434.js";
import {
  e as e2,
  g,
  i2 as i,
  j,
  l
} from "./chunk-UYRCWUYQ.js";
import {
  s,
  s2,
  s3
} from "./chunk-HMVAPW5X.js";
import {
  a,
  o2 as o
} from "./chunk-IYZKKFJM.js";
import {
  R,
  has
} from "./chunk-JZJWZ6DN.js";
import "./chunk-6TJCVOLN.js";

// node_modules/@arcgis/core/widgets/Search/css.js
var e5 = "esri-search";
var i4 = { base: `${e5} esri-widget`, loader: "esri-widget__loader", loaderText: "esri-widget__loader-text", loaderAnimation: "esri-widget__loader-animation", esriInput: "esri-input", hasMultipleSources: `${e5}--multiple-sources`, isLoading: `${e5}--loading`, isSearching: `${e5}--searching`, showSuggestions: `${e5}--show-suggestions`, showSources: `${e5}--sources`, showWarning: `${e5}--warning`, container: `${e5}__container`, input: `${e5}__input`, inputContainer: `${e5}__input-container`, form: `${e5}__form`, submitButton: `${e5}__submit-button`, sourcesButton: `${e5}__sources-button`, clearButton: `${e5}__clear-button`, sourceName: `${e5}__source-name`, suggestionsMenu: `${e5}__suggestions-menu`, suggestionList: `${e5}__suggestions-list`, suggestionListCurrentLocation: `${e5}__suggestions-list--current-location`, sourcesMenu: `${e5}__sources-menu`, source: `${e5}__source`, warningMenu: `${e5}__warning-menu`, warningMenuBody: `${e5}__warning-body`, warningMenuHeader: `${e5}__warning-header`, warningMenuText: `${e5}__warning-text`, noValueText: `${e5}__no-value-text`, esriWidgetDisabled: "esri-widget--disabled", button: "esri-widget--button", fallbackText: "esri-icon-font-fallback-text", header: "esri-widget__heading", locate: "esri-icon-locate-circled", menu: "esri-menu", menuList: "esri-menu__list", menuItem: "esri-menu__list-item", menuItemActive: "esri-menu__list-item--active", menuItemFocus: "esri-menu__list-item--focus", menuHeader: "esri-menu__header", loadingIcon: "esri-icon-loading-indicator esri-rotating", searchIcon: "esri-icon-search", dropdownIcon: "esri-icon-down-arrow esri-search__sources-button--down", dropupIcon: "esri-icon-up-arrow esri-search__sources-button--up", clearIcon: "esri-icon-close", noticeIcon: "esri-icon-notice-triangle", widgetIcon: "esri-icon-search", disabled: "esri-disabled" };

// node_modules/@arcgis/core/widgets/Search/searchResultRendererCSS.js
var e6 = "esri-search-result-renderer";
var s8 = { base: `${e6} esri-widget`, anchor: "esri-widget__anchor", showMoreResults: `${e6}__more-results--show-more-results`, moreResults: `${e6}__more-results`, moreResultsList: `${e6}__more-results-list`, moreResultsHeader: `${e6}__more-results-header`, moreResultsItem: `${e6}__more-results-item`, moreResultsListHeader: `${e6}__more-results-list-header` };

// node_modules/@arcgis/core/widgets/Search/SearchSource.js
var p = class extends s6(l2) {
  constructor(t4) {
    super(t4), this.autoNavigate = null, this.filter = null, this.getResults = null, this.getSuggestions = null, this.maxResults = null, this.maxSuggestions = null, this.minSuggestCharacters = null, this.outFields = null, this.placeholder = "", this.popupEnabled = null, this.popupTemplate = null, this.prefix = "", this.resultGraphicEnabled = null, this.resultSymbol = null, this.suggestionsEnabled = null, this.suffix = "", this.withinViewEnabled = false, this.zoomScale = null;
  }
};
e([y()], p.prototype, "autoNavigate", void 0), e([y()], p.prototype, "filter", void 0), e([y()], p.prototype, "getResults", void 0), e([y()], p.prototype, "getSuggestions", void 0), e([y()], p.prototype, "maxResults", void 0), e([y()], p.prototype, "maxSuggestions", void 0), e([y()], p.prototype, "minSuggestCharacters", void 0), e([y()], p.prototype, "outFields", void 0), e([y()], p.prototype, "placeholder", void 0), e([y()], p.prototype, "popupEnabled", void 0), e([y()], p.prototype, "popupTemplate", void 0), e([y()], p.prototype, "prefix", void 0), e([y()], p.prototype, "resultGraphicEnabled", void 0), e([y()], p.prototype, "resultSymbol", void 0), e([y()], p.prototype, "suggestionsEnabled", void 0), e([y()], p.prototype, "suffix", void 0), e([y()], p.prototype, "withinViewEnabled", void 0), e([y()], p.prototype, "zoomScale", void 0), p = e([a2("esri.widgets.Search.SearchSource")], p);
var i5 = p;

// node_modules/@arcgis/core/widgets/Search/support/geometryUtils.js
var i6 = s2.getLogger("esri.widgets.Search.support.geometryUtils");
function o2(r, t4) {
  var _a, _b;
  if (!t4)
    return i6.error("missing-parameter: view is missing."), Promise.reject(new s3("searchgeometryutils:missing-parameter", "view is missing."));
  if (!r)
    return i6.error("missing-parameter: point is missing."), Promise.reject(new s3("searchgeometryutils:missing-parameter", "point is missing."));
  if (r.hasZ || "2d" === t4.type)
    return Promise.resolve(r);
  const n11 = (_a = t4 == null ? void 0 : t4.map) == null ? void 0 : _a.ground;
  return n11 && n11.layers.length ? n11.queryElevation(r, { cache: (_b = t4.basemapTerrain) == null ? void 0 : _b.elevationQueryCache }).then((e9) => e9.geometry) : Promise.resolve(r);
}
function s9(e9) {
  if (null == e9)
    return null;
  switch (e9.type) {
    case "point":
      return e9;
    case "extent":
      return e9.center;
    case "polygon":
      return e9.centroid;
    case "multipoint":
      return e9.getPoint(0);
    case "polyline":
      return e9.getPoint(0, 0);
  }
  return null;
}
function m4(e9, r, t4) {
  return null == e9 ? null : "extent" === e9.type ? e9 : "multipoint" === e9.type || "polygon" === e9.type || "polyline" === e9.type ? e9.extent : "point" === e9.type ? u(e9, r, t4) : void 0;
}
function l4(e9, r, t4) {
  return null == e9 || null == r ? null : u(e9.center, r, t4);
}
function u(e9, r, i9) {
  const o4 = e9.hasZ ? e9.z : void 0;
  if (r == null ? void 0 : r.map) {
    return (null != i9 ? d3(r, i9) : r.extent).clone().centerAt(e9).set({ zmax: o4, zmin: o4 });
  }
  return new M({ xmin: e9.x - 0.25, ymin: e9.y - 0.25, xmax: e9.x + 0.25, ymax: e9.y + 0.25, spatialReference: e9.spatialReference, zmin: o4, zmax: o4 });
}

// node_modules/@arcgis/core/widgets/Search/support/layerSearchUtils.js
var c = /https?:\/\/services.*\.arcgis\.com/i;
var d4 = /(?:\{([^}]+)\})/g;
var f4 = s2.getLogger("esri.widgets.Search.support.layerSearchUtils");
function p2(t4, r) {
  const { exactMatch: n11 = false, location: l9, maxResults: o4, spatialReference: s10, source: u4, sourceIndex: a9, suggestResult: c7, view: d10 } = t4, { layer: p7, filter: m8, zoomScale: T4 } = u4, L3 = d10 == null ? void 0 : d10.scale, S4 = g2(u4, d10), q3 = r && r.signal;
  return h4(p7).then(() => {
    const e9 = p7.popupTemplate;
    return e9 ? e9.getRequiredFields(p7.fieldsIndex) : null;
  }).then((t5) => {
    var _a, _b, _c, _d;
    const { objectIdField: r2, returnZ: g5 } = p7, h8 = b(u4);
    if (!I(p7, h8))
      throw f4.error("invalid-field: displayField is invalid."), new s3("getResults():invalid-field", "displayField is invalid.");
    const C3 = t5 && t5.length ? t5 : [h8], E2 = u4.outFields || C3, M3 = y2(E2);
    E2.includes(r2) || M3 || E2.push(r2), ((_a = p7.floorInfo) == null ? void 0 : _a.floorField) && E2.push(p7.floorInfo.floorField);
    if (!(M3 || j6(p7, E2)))
      throw f4.error("invalid-field: outField is invalid."), new s3("getResults():invalid-field", "outField is invalid.");
    const A2 = p7.createQuery(), { orderByFields: N2 } = u4;
    if (N2 && (A2.orderByFields = N2), s10) {
      A2.outSpatialReference = s10;
      const e9 = 1 / H(s10);
      e9 && (A2.maxAllowableOffset = e9);
    }
    const k4 = "mesh" === p7.geometryType || "multipatch" === p7.geometryType, O2 = ((_c = (_b = p7.capabilities) == null ? void 0 : _b.data) == null ? void 0 : _c.supportsZ) && !k4;
    if (A2.returnZ = O2 && false !== g5, A2.returnGeometry = true, A2.multipatchOption = k4 ? "xyFootprint" : null, E2 && (A2.outFields = E2), l9)
      A2.geometry = l9;
    else if (c7.key)
      A2.objectIds = [c7.key];
    else {
      const t6 = u4.searchFields || [h8];
      if (!j6(p7, t6))
        throw f4.error("invalid-field: search field is invalid."), new s3("getResults():invalid-field", "search field is invalid.");
      $(p7) && (A2.num = o4), S4 && (A2.geometry = S4);
      const r3 = (_d = c7.text) == null ? void 0 : _d.trim();
      if (!r3)
        return [];
      const i9 = c7.text, { prefix: l10 = "", suffix: s11 = "" } = u4, a10 = R2(`${l10}${i9}${s11}`);
      w(p7) && x2(p7, t6) && !n11 && i9 && (A2.fullText = v({ text: i9, searchFields: t6 }));
      const d11 = D({ searchTerm: a10, layer: p7, searchFields: t6, filter: m8, exactMatch: n11, query: A2, type: "search" });
      if (A2.where = d11, !F(A2))
        return [];
    }
    return p7.queryFeatures(A2, { signal: q3 }).then((e9) => U(e9, d10, u4, a9, h8, L3, T4));
  });
}
function m5(t4, r) {
  const { source: i9, spatialReference: n11, view: l9, suggestTerm: o4, maxSuggestions: s10, sourceIndex: u4, exactMatch: a9 } = t4, { layer: c7, filter: p7 } = i9, m8 = r && r.signal, T4 = g2(i9, l9);
  return h4(c7).then(() => {
    if (!$(c7))
      return [];
    const t5 = b(i9), r2 = i9.searchFields || [t5], l10 = [];
    i9.suggestionTemplate ? i9.suggestionTemplate.replaceAll(d4, (e9, t6) => (l10.push(t6), e9)) : l10.push(t5);
    const g5 = y2(l10);
    l10.includes(c7.objectIdField) || g5 || l10.push(c7.objectIdField);
    const h8 = I(c7, t5), L3 = g5 || j6(c7, l10), S4 = j6(c7, r2);
    if (!h8)
      throw f4.error("invalid-field: displayField is invalid."), new s3("getSuggestions():invalid-field", "displayField is invalid.");
    if (!L3)
      throw f4.error("invalid-field: outField is invalid."), new s3("getSuggestions():invalid-field", "outField is invalid.");
    if (!S4)
      throw f4.error("invalid-field: search field is invalid."), new s3("getSuggestions():invalid-field", "search field is invalid.");
    const q3 = c7.createQuery(), { orderByFields: C3 } = i9;
    C3 && (q3.orderByFields = C3), q3.outSpatialReference = n11, q3.returnGeometry = false, q3.num = s10, q3.outFields = l10, T4 && (q3.geometry = T4);
    if (!o4.trim())
      return [];
    const { prefix: E2 = "", suffix: M3 = "" } = i9, A2 = R2(`${E2}${o4}${M3}`);
    w(c7) && x2(c7, r2) && !a9 && o4 && (q3.fullText = v({ text: o4, searchFields: r2 }));
    const N2 = D({ searchTerm: A2, layer: c7, searchFields: r2, filter: p7, exactMatch: a9, query: q3, type: "suggest" });
    return q3.where = N2, F(q3) ? c7.queryFeatures(q3, { signal: m8 }).then((e9) => O(e9, i9, u4, t5)) : [];
  });
}
function g2(e9, t4) {
  const { filter: r, withinViewEnabled: i9 } = e9, n11 = t4 == null ? void 0 : t4.extent, l9 = r == null ? void 0 : r.geometry;
  return l9 ?? (i9 && n11 ? n11 : void 0);
}
function y2(e9) {
  return e9 && e9.includes("*");
}
async function h4(e9) {
  e9 && await e9.load();
}
function F(e9) {
  return !(!e9.fullText && !e9.where);
}
function x2(e9, t4) {
  const r = e9 == null ? void 0 : e9.indexes;
  if (!r || !(t4 == null ? void 0 : t4.length))
    return false;
  return r.filter((e10) => "FullText" === e10.indexType).some((e10) => {
    var _a;
    const r2 = ((_a = e10.fields) == null ? void 0 : _a.split(",").map((e11) => e11.trim().toLowerCase())) || [];
    return t4.every((e11) => r2.includes(e11.toLowerCase()));
  });
}
function v({ text: e9, searchFields: t4 }) {
  return e9.trim().split(" ").filter((e10) => !!e10.trim()).map((e10) => new i3({ onFields: t4, searchTerm: e10, searchType: "prefix" }));
}
function w(e9) {
  var _a, _b;
  return ((_b = (_a = e9 == null ? void 0 : e9.capabilities) == null ? void 0 : _a.query) == null ? void 0 : _b.supportsFullTextSearch) ?? false;
}
function $(e9) {
  var _a, _b;
  return ((_b = (_a = e9 == null ? void 0 : e9.capabilities) == null ? void 0 : _a.query) == null ? void 0 : _b.supportsPagination) ?? false;
}
function T2(e9) {
  var _a, _b, _c;
  return ((_c = (_b = (_a = e9 == null ? void 0 : e9.fieldsIndex) == null ? void 0 : _a.fields) == null ? void 0 : _b.find((e10) => "string" === e10.type)) == null ? void 0 : _c.name) ?? "";
}
function b(e9) {
  return e9.displayField || e9.layer.displayField || T2(e9.layer);
}
function j6(e9, t4) {
  return !(!e9 || !(t4 == null ? void 0 : t4.length)) && t4.every((t5) => I(e9, t5));
}
function I(e9, t4) {
  return !!e9.getField(t4);
}
function L2(e9) {
  for (let t4 = 0; t4 < e9.length; t4++)
    if (e9.charCodeAt(t4) > 255)
      return true;
  return false;
}
function S2(e9, t4, r) {
  let i9 = null;
  const { codedValues: n11 } = e9;
  return n11 && n11.some((e10) => {
    const n12 = e10.name, l9 = r ? n12 : n12.toLowerCase();
    return (r ? t4 : t4.toLowerCase()) === l9 && (i9 = e10.code.toString(), true);
  }), i9;
}
function R2(e9) {
  return e9.replaceAll("'", "''");
}
function q(e9, t4) {
  const r = t4 == null ? void 0 : t4.where;
  return r ? `(${e9}) AND (${r})` : e9;
}
function C({ currentTerm: e9, field: t4, filter: r, exactMatch: i9, url: n11, type: l9 }) {
  const o4 = t4 == null ? void 0 : t4.type, s10 = t4 == null ? void 0 : t4.name;
  if ("string" === o4 || "date" === o4 || "global-id" === o4) {
    const t5 = c.test(n11 ?? ""), o5 = t5 && L2(e9) ? "N" : "";
    if (i9 && "search" === l9)
      return q(`${s10} = ${o5}'${e9}'`, r);
    if (t5) {
      return q(`${s10} LIKE ${o5}${`'${e9}%'`}`, r);
    }
    return q(`${`LOWER(${s10})`} LIKE ${o5}${`'${e9.toLowerCase()}%'`}`, r);
  }
  if ("oid" === o4 || "small-integer" === o4 || "integer" === o4 || "single" === o4 || "double" === o4) {
    const t5 = Number(e9);
    return isNaN(t5) ? null : q(`${s10} = ${t5}`, r);
  }
  return q(`${s10} = ${e9}`, r);
}
function E(e9, t4) {
  return e9 ? ` OR (${t4})` : `(${t4})`;
}
function D({ searchTerm: e9, layer: t4, searchFields: r, filter: i9, exactMatch: n11, query: l9, type: o4 }) {
  const { definitionExpression: s10, url: u4 } = t4;
  let a9 = "";
  return !l9.fullText && e9 && r && r.forEach((r2) => {
    const l10 = t4.getField(r2), s11 = "function" == typeof t4.getFieldDomain && t4.getFieldDomain(r2), c7 = (s11 && "coded-value" === s11.type ? S2(s11, e9, n11) : null) || e9 || null;
    if (null !== c7) {
      const e10 = C({ currentTerm: c7, field: l10, filter: i9, exactMatch: n11, url: u4, type: o4 });
      e10 && (a9 += E(a9, e10));
    }
  }), s10 && a9 ? `(${s10}) AND (${a9})` : s10 || a9;
}
function M2(e9, t4) {
  let r = null;
  const { codedValues: i9 } = e9;
  return i9 && i9.length && i9.some((e10) => e10.code === t4 && (r = e10.name, true)), r;
}
function A(e9, t4) {
  return e9[Object.keys(e9).find((e10) => e10.toLowerCase() === t4.toLowerCase())];
}
function N(e9, t4, r) {
  const i9 = e9.sourceLayer, { attributes: n11 } = e9, l9 = "function" == typeof i9.getFieldDomain && i9.getFieldDomain(r);
  if (t4)
    return s5(t4, n11);
  if (r && n11) {
    const e10 = i9.getField(r), t5 = A(n11, r);
    return null == t5 ? "" : l9 && "coded-value" === l9.type ? M2(l9, t5) ?? "" : "date" === (e10 == null ? void 0 : e10.type) ? f2(new Date(t5)) : "number" == typeof t5 ? t5.toString() : "string" != typeof t5 ? "" : t5.trim();
  }
  return "";
}
function k3(e9, t4, r, i9) {
  const n11 = e9.sourceLayer, { attributes: l9 } = e9, { objectIdField: o4 } = n11, s10 = o4 ? l9[o4] : null;
  return { text: N(e9, t4.suggestionTemplate, i9), key: s10, sourceIndex: r };
}
function O(e9, t4, r, i9) {
  return e9.features.map((e10) => k3(e10, t4, r, i9));
}
function B(e9, r, i9, l9, u4, a9, c7) {
  const d10 = e9.clone(), f9 = e9.sourceLayer, p7 = f9 == null ? void 0 : f9.objectIdField, m8 = p7 ? e9.attributes[p7] : null, g5 = N(e9, i9.searchTemplate, u4), y6 = m4(d10.geometry, r, a9), h8 = "number" == typeof c7 ? l4(a(y6), r, c7) : y6, F2 = e9.clone();
  return null != h8 && (F2.geometry = j2.fromExtent(h8)), { extent: h8, target: F2, feature: d10, key: m8, name: g5, sourceIndex: l9 };
}
function U(e9, t4, r, i9, n11, l9, o4) {
  return e9.features.map((e10) => B(e10, t4, r, i9, n11, l9, o4));
}

// node_modules/@arcgis/core/widgets/Search/LayerSearchSource.js
var o3;
var h5 = o3 = class extends i5 {
  constructor(e9) {
    super(e9), this.displayField = null, this.exactMatch = null, this.orderByFields = null, this.searchFields = null, this.searchTemplate = null, this.suggestionTemplate = null, this.getResults = (e10, t4) => p2({ source: this, ...e10 }, t4), this.getSuggestions = (e10, t4) => m5({ source: this, ...e10 }, t4);
  }
  set layer(e9) {
    this._set("layer", e9), e9 && e9.load().catch(() => {
    });
  }
  get name() {
    return this._getLayerTitle() ?? "";
  }
  set name(e9) {
    this._overrideIfSome("name", e9);
  }
  clone() {
    return new o3({ autoNavigate: this.autoNavigate, filter: this.filter, maxResults: this.maxResults, maxSuggestions: this.maxSuggestions, minSuggestCharacters: this.minSuggestCharacters, outFields: this.outFields ? a(this.outFields) : null, placeholder: this.placeholder, popupEnabled: this.popupEnabled, prefix: this.prefix, resultGraphicEnabled: this.resultGraphicEnabled, resultSymbol: this.resultSymbol ? this.resultSymbol.clone() : null, suggestionsEnabled: this.suggestionsEnabled, suffix: this.suffix, withinViewEnabled: this.withinViewEnabled, displayField: this.displayField, exactMatch: this.exactMatch, layer: this.layer, searchFields: this.searchFields ? a(this.searchFields) : null, suggestionTemplate: this.suggestionTemplate, zoomScale: this.zoomScale });
  }
  _getFirstStringField() {
    var _a, _b;
    return ((_b = (_a = this.layer.fieldsIndex) == null ? void 0 : _a.fields.find((e9) => "string" === e9.type)) == null ? void 0 : _b.name) ?? "";
  }
  _getDisplayField() {
    return this.displayField || this.layer.displayField || this._getFirstStringField();
  }
  _getSearchFieldsString() {
    const { layer: e9, searchFields: t4 } = this;
    if (!e9.loaded)
      return "";
    return `: ${(t4 || [this._getDisplayField()]).map((t5) => {
      const s10 = e9.getField(t5);
      return s10 && s10.alias || t5;
    }).join(", ")}`;
  }
  _getLayerTitle() {
    const { layer: e9 } = this;
    if (!e9)
      return;
    const { title: t4 } = e9;
    return t4 ? `${t4}${this._getSearchFieldsString()}` : void 0;
  }
};
e([y({ json: { read: { source: "field.name" }, write: { target: "field.name" } } })], h5.prototype, "displayField", void 0), e([y({ json: { read: { source: "field.exactMatch" }, write: { target: "field.exactMatch" } } })], h5.prototype, "exactMatch", void 0), e([y({ value: null })], h5.prototype, "layer", null), e([y()], h5.prototype, "name", null), e([y({ type: [String], json: { write: true } })], h5.prototype, "orderByFields", void 0), e([y()], h5.prototype, "searchFields", void 0), e([y()], h5.prototype, "searchTemplate", void 0), e([y()], h5.prototype, "suggestionTemplate", void 0), h5 = o3 = e([a2("esri.widgets.Search.LayerSearchSource")], h5);
var n6 = h5;

// node_modules/@arcgis/core/rest/locator/utils.js
function e7(e9) {
  return !!e9 && "number" == typeof e9.x && "number" == typeof e9.y;
}
function n7(e9) {
  return e9 && "number" == typeof e9.xmin && "number" == typeof e9.ymin && "number" == typeof e9.xmax && "number" == typeof e9.ymax;
}

// node_modules/@arcgis/core/rest/support/AddressCandidate.js
var i7 = class extends l2 {
  constructor(t4) {
    super(t4), this.address = null, this.attributes = null, this.extent = null, this.location = null, this.score = null;
  }
};
e([y({ type: String, json: { write: true } })], i7.prototype, "address", void 0), e([y({ type: Object, json: { write: true } })], i7.prototype, "attributes", void 0), e([y({ type: M, json: { write: true } })], i7.prototype, "extent", void 0), e([y({ type: x, json: { write: true } })], i7.prototype, "location", void 0), e([y({ type: Number, json: { write: true } })], i7.prototype, "score", void 0), i7 = e([a2("esri.rest.support.AddressCandidate")], i7);
var c2 = i7;

// node_modules/@arcgis/core/rest/support/AddressToLocationsParameters.js
var l5 = class extends l2 {
  constructor(t4) {
    super(t4), this.address = null, this.apiKey = null, this.categories = null, this.countryCode = null, this.forStorage = null, this.location = null, this.locationType = null, this.magicKey = null, this.maxLocations = null, this.outFields = null, this.outSpatialReference = null, this.searchExtent = null;
  }
};
e([y({ type: Object, json: { write: true } })], l5.prototype, "address", void 0), e([y(t2)], l5.prototype, "apiKey", void 0), e([y({ type: [String], json: { read: { source: "category", reader: (t4) => t4 ? t4.split(",") : null }, write: { target: "category", writer: (t4, o4) => {
  o4.category = t4 ? t4.join(",") : null;
} } } })], l5.prototype, "categories", void 0), e([y({ type: String, json: { write: true } })], l5.prototype, "countryCode", void 0), e([y({ type: Boolean, json: { write: true } })], l5.prototype, "forStorage", void 0), e([y({ type: x, json: { write: { writer: (t4, o4) => {
  o4.location = t4 ? t4.clone().normalize() : null;
} } } })], l5.prototype, "location", void 0), e([y({ type: String, json: { write: true } })], l5.prototype, "locationType", void 0), e([y({ type: String, json: { write: true } })], l5.prototype, "magicKey", void 0), e([y({ type: Number, json: { write: true } })], l5.prototype, "maxLocations", void 0), e([y({ type: [String], json: { write: { writer: (t4, o4) => {
  o4.outFields = t4 ? t4.join(",") : null;
} } } })], l5.prototype, "outFields", void 0), e([y({ type: f, json: { read: { source: "outSR" }, write: { target: "outSR" } } })], l5.prototype, "outSpatialReference", void 0), e([y({ type: M, json: { write: { writer: (t4, o4) => {
  const e9 = t4 ? t4.shiftCentralMeridian() : null;
  o4.searchExtent = e9;
} } } })], l5.prototype, "searchExtent", void 0), l5 = e([a2("esri.rest.support.AddressToLocationsParameters")], l5), l5.from = d(l5);
var c3 = l5;

// node_modules/@arcgis/core/rest/locator/addressToLocations.js
async function d5(o4, n11, a9) {
  n11 = c3.from(n11);
  const d10 = f3(o4), { address: p7, ...m8 } = n11.toJSON(), u4 = { ...p7, ...m8, f: "json" }, c7 = s7({ ...d10.query, ...u4 }), j9 = i2(c7, a9), l9 = `${d10.path}/findAddressCandidates`;
  return j4(l9, j9).then(f5);
}
function f5({ data: r }) {
  if (!r)
    return [];
  const { candidates: t4, spatialReference: e9 } = r;
  return t4 ? t4.map((r2) => {
    if (!r2)
      return;
    const { extent: t5, location: s10 } = r2, i9 = !t5 || n7(t5);
    return e7(s10) && i9 ? (t5 && (t5.spatialReference = e9), s10 && (s10.spatialReference = e9), c2.fromJSON(r2)) : void 0;
  }) : [];
}

// node_modules/@arcgis/core/rest/support/LocationToAddressParameters.js
var a6 = class extends l2 {
  constructor(o4) {
    super(o4), this.apiKey = null, this.location = null, this.locationType = null, this.outSpatialReference = null;
  }
};
e([y(t2)], a6.prototype, "apiKey", void 0), e([y({ type: x, json: { write: { writer: (o4, r) => {
  const t4 = o4 ? o4.clone().normalize() : null, e9 = void 0 !== t4;
  r.location = e9 ? t4 : null;
} } } })], a6.prototype, "location", void 0), e([y({ type: String, json: { write: true } })], a6.prototype, "locationType", void 0), e([y({ type: f, json: { read: { source: "outSR" }, write: { target: "outSR" } } })], a6.prototype, "outSpatialReference", void 0), a6 = e([a2("esri.rest.support.LocationToAddressParameters")], a6), a6.from = d(a6);
var n8 = a6;

// node_modules/@arcgis/core/rest/locator/locationToAddress.js
async function n9(e9, n11, i9) {
  n11 = n8.from(n11);
  const c7 = f3(e9), m8 = { ...n11.toJSON(), f: "json" }, u4 = s7({ ...c7.query, ...m8 }), f9 = i2(u4, i9), p7 = `${c7.path}/reverseGeocode`;
  return j4(p7, f9).then(d6);
}
function d6({ data: r }) {
  if (!r)
    return;
  const { address: o4, location: t4 } = r, s10 = o4 && o4.Match_addr || "";
  return c2.fromJSON({ address: s10, attributes: o4 || {}, location: t4, score: 100 });
}

// node_modules/@arcgis/core/rest/support/SuggestionCandidate.js
var e8 = class extends l2 {
  constructor(o4) {
    super(o4), this.isCollection = null, this.magicKey = null, this.text = null;
  }
};
e([y({ type: Boolean, json: { write: true } })], e8.prototype, "isCollection", void 0), e([y({ type: String, json: { write: true } })], e8.prototype, "magicKey", void 0), e([y({ type: String, json: { write: true } })], e8.prototype, "text", void 0), e8 = e([a2("esri.rest.support.SuggestionCandidate")], e8);
var p3 = e8;

// node_modules/@arcgis/core/rest/support/SuggestLocationsParameters.js
var c4 = class extends l2 {
  constructor(t4) {
    super(t4), this.apiKey = null, this.categories = null, this.countryCode = null, this.location = null, this.maxSuggestions = null, this.outSpatialReference = null, this.searchExtent = null, this.text = null;
  }
};
e([y(t2)], c4.prototype, "apiKey", void 0), e([y({ type: [String], json: { read: { source: "category", reader: (t4) => t4 ? t4.split(",") : null }, write: { target: "category", writer: (t4, o4) => {
  o4.category = t4 ? t4.join(",") : null;
} } } })], c4.prototype, "categories", void 0), e([y({ type: String, json: { write: true } })], c4.prototype, "countryCode", void 0), e([y({ type: x, json: { write: { writer: (t4, o4) => {
  o4.location = t4 ? t4.clone().normalize() : null;
} } } })], c4.prototype, "location", void 0), e([y({ type: Number, json: { write: true } })], c4.prototype, "maxSuggestions", void 0), e([y({ type: f, json: { read: { source: "outSR" }, write: { target: "outSR" } } })], c4.prototype, "outSpatialReference", void 0), e([y({ type: M, json: { write: { writer: (t4, o4) => {
  const e9 = t4 ? t4.shiftCentralMeridian() : null;
  o4.searchExtent = JSON.stringify(e9);
} } } })], c4.prototype, "searchExtent", void 0), e([y({ type: String, json: { write: true } })], c4.prototype, "text", void 0), c4 = e([a2("esri.rest.support.SuggestLocationsParameters")], c4), c4.from = d(c4);
var l6 = c4;

// node_modules/@arcgis/core/rest/locator/suggestLocations.js
async function u2(n11, u4, m8) {
  const p7 = f3(n11), a9 = { ...(u4 = l6.from(u4)).toJSON(), f: "json" }, f9 = s7({ ...p7.query, ...a9 }), g5 = i2(f9, m8), c7 = `${p7.path}/suggest`;
  return j4(c7, g5).then(i8);
}
function i8(t4) {
  const { data: o4 } = t4;
  if (!o4)
    return [];
  const { suggestions: r } = o4;
  return r ? r.map((t5) => new p3(t5)) : [];
}

// node_modules/@arcgis/core/widgets/Search/support/locatorUtils.js
var l7 = "Single Line Input";
var m6 = 3e5;
function f6(e9, t4) {
  return e9.location ? v2(e9, t4) : h6(e9, t4);
}
function d7(e9, t4) {
  var _a;
  if (t4.localSearchDisabled)
    return null;
  const o4 = e9 == null ? void 0 : e9.scale;
  return "number" == typeof o4 && o4 <= m6 ? (_a = e9 == null ? void 0 : e9.extent) == null ? void 0 : _a.center : null;
}
async function g3(e9, t4) {
  const { source: o4, spatialReference: r, view: s10, suggestTerm: c7, maxSuggestions: a9, sourceIndex: u4 } = e9, l9 = new l6(), { apiKey: m8, url: f9 } = o4, g5 = w2(o4, s10), p7 = t4 && t4.signal;
  if (!f9)
    return null;
  m8 && (l9.apiKey = m8), o4.categories && (l9.categories = o4.categories), r && (l9.outSpatialReference = r);
  const y6 = d7(s10, o4);
  y6 && (l9.location = y6);
  if (!c7.trim())
    return null;
  const { prefix: x5 = "", suffix: S4 = "" } = o4, v4 = `${x5}${c7}${S4}`;
  return l9.text = v4, g5 && (l9.searchExtent = g5), l9.maxSuggestions = a9, o4.countryCode && (l9.countryCode = o4.countryCode), u2(f9, l9, { signal: p7 }).then((e10) => I2(e10, u4));
}
function p4(e9) {
  return !!e9 && /(?:geocode\-api\.arcgis\.com\/arcgis\/rest\/services\/world\/geocodeserver).*/i.test(e9);
}
function y3(e9) {
  return !!e9 && /(?:\/servers\/[\da-z\.-]+\/rest\/services\/world\/geocodeserver).*/i.test(e9);
}
function x3(e9) {
  return !!e9 && /(?:arcgis\.com\/arcgis\/rest\/services\/world\/geocodeserver).*/i.test(e9);
}
var S3 = "https://geocode-api.arcgis.com/arcgis/rest/services/World/GeocodeServer";
async function v2(e9, t4) {
  const { source: o4, spatialReference: n11, location: s10, sourceIndex: i9, view: a9 } = e9, { apiKey: u4, url: l9, zoomScale: m8, defaultZoomScale: f9 } = o4;
  if (null == l9)
    return [];
  const d10 = a9 == null ? void 0 : a9.scale, g5 = t4 == null ? void 0 : t4.signal, p7 = new n8();
  p7.location = s10, u4 && (p7.apiKey = u4), n11 && (p7.outSpatialReference = n11);
  try {
    return K([await n9(l9, p7, { signal: g5 })], { sourceIndex: i9, scale: d10, view: a9, zoomScale: m8, defaultZoomScale: f9 });
  } catch (y6) {
    return [];
  }
}
function w2(e9, t4) {
  const { filter: o4, withinViewEnabled: r } = e9, n11 = t4 && t4.scale, s10 = t4 && t4.extent, c7 = o4 && o4.geometry;
  return m4(c7, t4, n11) || (r && s10 ? s10 : void 0);
}
async function h6(e9, t4) {
  var _a;
  const { source: r, suggestResult: n11, spatialReference: c7, view: i9, maxResults: a9, sourceIndex: u4 } = e9, m8 = r && r.zoomScale, f9 = r && r.defaultZoomScale, g5 = (_a = n11.text) == null ? void 0 : _a.trim();
  if (!g5)
    return null;
  const p7 = !n11.key && r.prefix ? r.prefix : "", y6 = !n11.key && r.suffix ? r.suffix : "", x5 = `${p7}${n11.text}${y6}`, S4 = new c3(), { apiKey: v4, url: h8 } = r, j9 = i9 && i9.scale, I3 = w2(r, i9), $3 = t4 && t4.signal;
  if (v4 && (S4.apiKey = v4), !h8)
    return null;
  r.categories && (S4.categories = r.categories), r.locationType && (S4.locationType = r.locationType), c7 && (S4.outSpatialReference = c7);
  const L3 = d7(i9, r);
  L3 && (S4.location = L3), S4.maxLocations = a9, I3 && (S4.searchExtent = I3), r.countryCode && (S4.countryCode = r.countryCode);
  const { key: R3 } = n11, T4 = `${R3}`;
  return R3 && (S4.magicKey = T4), S4.address = {}, S4.address[r.singleLineFieldName || l7] = x5, r.outFields && (S4.outFields = r.outFields), d5(h8, S4, { signal: $3 }).then((e10) => K(e10, { key: T4, scale: j9, sourceIndex: u4, view: i9, zoomScale: m8, defaultZoomScale: f9 }));
}
function j7(e9, t4) {
  return { text: e9.text, key: e9.magicKey, sourceIndex: t4 };
}
function I2(e9, t4) {
  return e9.map((e10) => j7(e10, t4));
}
function $2(o4, r) {
  const { key: n11, scale: s10, sourceIndex: c7, view: i9, zoomScale: l9, defaultZoomScale: m8 } = r, { attributes: f9, extent: d10, location: g5, address: p7 } = o4, y6 = new h3({ geometry: g5, attributes: f9 }), x5 = d10 || g5, S4 = m4(x5, i9, s10), v4 = "number" == typeof l9 ? l4(S4, i9, l9) : "number" == typeof m8 && "point" === (x5 == null ? void 0 : x5.type) ? l4(S4, i9, m8) : S4, w4 = g5 ? `${g5.x},${g5.y}` : "", h8 = p7 || w4, j9 = y6.clone();
  return null != v4 && (j9.geometry = j2.fromExtent(v4)), { extent: v4, feature: y6, target: j9, key: n11, name: h8, sourceIndex: c7 };
}
function K(e9, t4) {
  return e9.filter(Boolean).map((e10) => $2(e10, t4));
}

// node_modules/@arcgis/core/widgets/Search/LocatorSearchSource.js
var a7;
var p5 = "esri.widgets.Search.LocatorSearchSource";
var n10 = a7 = class extends i5 {
  constructor(e9) {
    super(e9), this.apiKey = null, this.categories = null, this.countryCode = null, this.defaultZoomScale = null, this.localSearchDisabled = false, this.locationType = null, this.name = "", this.placeholder = "", this.searchTemplate = "", this.singleLineFieldName = null, this.suggestionsEnabled = null, this.url = null, this.zoomScale = null, this.getResults = (e10, t4) => f6({ source: this, ...e10 }, t4), this.getSuggestions = (e10, t4) => g3({ source: this, ...e10 }, t4);
  }
  clone() {
    return new a7({ apiKey: this.apiKey, autoNavigate: this.autoNavigate, filter: this.filter, maxResults: this.maxResults, maxSuggestions: this.maxSuggestions, minSuggestCharacters: this.minSuggestCharacters, outFields: this.outFields ? a(this.outFields) : null, placeholder: this.placeholder, popupEnabled: this.popupEnabled, prefix: this.prefix, resultGraphicEnabled: this.resultGraphicEnabled, resultSymbol: this.resultSymbol ? this.resultSymbol.clone() : null, suggestionsEnabled: this.suggestionsEnabled, suffix: this.suffix, withinViewEnabled: this.withinViewEnabled, categories: this.categories ? a(this.categories) : null, countryCode: this.countryCode, locationType: this.locationType, searchTemplate: this.searchTemplate, singleLineFieldName: this.singleLineFieldName, zoomScale: this.zoomScale });
  }
};
e([y()], n10.prototype, "apiKey", void 0), e([y()], n10.prototype, "categories", void 0), e([y()], n10.prototype, "countryCode", void 0), e([y({ json: { write: true } })], n10.prototype, "defaultZoomScale", void 0), e([y()], n10.prototype, "localSearchDisabled", void 0), e([y()], n10.prototype, "locationType", void 0), e([y({ json: { write: true } })], n10.prototype, "name", void 0), e([y({ json: { write: true } })], n10.prototype, "placeholder", void 0), e([y()], n10.prototype, "searchTemplate", void 0), e([y({ json: { write: true } })], n10.prototype, "singleLineFieldName", void 0), e([y({ json: { read: { source: "suggest" }, write: { target: "suggest" } } })], n10.prototype, "suggestionsEnabled", void 0), e([y({ json: { write: true } })], n10.prototype, "url", void 0), e([y({ json: { write: true } })], n10.prototype, "zoomScale", void 0), n10 = a7 = e([a2(p5)], n10);
var c5 = n10;

// node_modules/@arcgis/core/widgets/support/geolocationUtils.js
var u3 = s2.getLogger("esri.widgets.support.geolocationUtils");
var a8 = { maximumAge: 0, timeout: 15e3, enableHighAccuracy: true };
function m7() {
  const e9 = has("esri-geolocation");
  return e9 || u3.warn("geolocation-unsupported", "Geolocation unsupported."), e9;
}
function l8() {
  const e9 = window.isSecureContext;
  return e9 || u3.warn("insecure-context", "Geolocation requires a secure origin."), e9;
}
function g4() {
  return m7() && l8();
}
function p6(e9) {
  const o4 = 15e3;
  return e9 || (e9 = a8), new Promise((r, i9) => {
    setTimeout(() => i9(new s3("geolocation:timeout", "getting the current geolocation position timed out")), o4), navigator.geolocation.getCurrentPosition(r, i9, e9 ?? void 0);
  });
}
var d8;
function f7(e9, o4) {
  if (d8)
    return d8(e9, o4);
  const { position: r, view: i9 } = e9, n11 = v3(r), c7 = n11 == null ? void 0 : n11.coords;
  if (!c7)
    throw new s3("geometry-service:no-coords", "Geolocation has no coordinates");
  return h7(y4(c7), i9, o4);
}
function v3(e9) {
  const t4 = e9 && e9.coords || {}, o4 = { accuracy: t4.accuracy, altitude: t4.altitude, altitudeAccuracy: t4.altitudeAccuracy, heading: t4.heading, latitude: t4.latitude, longitude: t4.longitude, speed: t4.speed };
  return e9 ? { coords: o4, timestamp: e9.timestamp } : e9;
}
function y4({ longitude: e9, latitude: t4, altitude: o4 }) {
  return new x({ longitude: e9, latitude: t4, z: o4 || void 0, spatialReference: { wkid: 4326 } });
}
function h7(e9, o4, r) {
  if (!o4)
    return Promise.resolve(e9);
  const n11 = o4.spatialReference;
  return n11.isWGS84 ? Promise.resolve(e9) : n11.isWebMercator ? Promise.resolve(d2(e9)) : j8(r).then((o5) => {
    if (!o5)
      throw new s3("geometry-service:missing-url", "Geometry service URL is missing");
    const i9 = new a5({ geometries: [e9], outSpatialReference: n11 });
    return n5(o5, i9, r).then((e10) => e10[0]);
  });
}
function j8(t4) {
  if (s.geometryServiceUrl)
    return Promise.resolve(s.geometryServiceUrl);
  const o4 = j5.getDefault();
  return o4.load(t4).catch(() => {
  }).then(() => o4.get("helperServices.geometry.url"));
}

// node_modules/@arcgis/core/widgets/Search/SearchViewModel.js
function H2(e9, t4) {
  return e9.hasOwnProperty(t4) && null != e9[t4] && "" !== e9[t4];
}
var J = () => h2("esri/widgets/Search/t9n/Search");
var U2 = "esri.widgets.Search.SearchViewModel";
var B2 = s2.getLogger(U2);
var Q = "highlight";
var Z = V.ofType({ key: (e9) => e9.layer ? "layer" : "locator", base: i5, typeMap: { layer: n6, locator: c5 } });
var q2 = f.WGS84;
var z = "esri/images/search/search-symbol-32.png";
var K2 = /<(?:.|\s)*?>/g;
var W2 = -1;
var X = class extends t3(n.EventedMixin(m)) {
  constructor(e9) {
    super(e9), this._gotoController = null, this._searching = null, this._updatingPromise = null, this._createdFeatureLayers = [], this.autoNavigate = true, this.autoSelect = true, this.defaultPopupTemplate = null, this.defaultSources = new Z(), this.defaultSymbols = { point: new n3({ url: a4(z), size: 24, width: 24, height: 24 }), polyline: new m2({ color: [130, 130, 130, 1], width: 2 }), polygon: new S({ color: [235, 235, 235, 0.4], outline: { color: [130, 130, 130, 1], width: 2 } }) }, this.includeDefaultSources = true, this.maxInputLength = 128, this.maxResults = 6, this.maxSuggestions = 6, this.messages = null, this.minSuggestCharacters = 3, this.popupEnabled = true, this.popupTemplate = null, this.portal = j5.getDefault(), this.resultCount = null, this.resultGraphicEnabled = true, this.resultGraphic = null, this.results = null, this.selectedSuggestion = null, this.searchAllEnabled = true, this.selectedResult = null, this.sources = new Z(), this.suggestionDelay = 350, this.suggestionCount = null, this.suggestions = null, this.suggestionsEnabled = true, this.view = null;
  }
  initialize() {
    const e9 = async () => {
      const e10 = await J();
      this.messages = e10, this.defaultPopupTemplate = new k2({ title: e10.searchResult, content: "{Match_addr}" });
    };
    e9(), this.addHandles([l3(() => [this.includeDefaultSources, this.view, this.portal], () => this._update(), h), s4(e9)]);
  }
  destroy() {
    this.removeAllHandles(), this._destroyFeatureLayers(), this._abortGoTo(), this.clearGraphics();
  }
  get activeSource() {
    return this.allSources.at(this.activeSourceIndex) ?? null;
  }
  get activeSourceIndex() {
    return 1 === this.allSources.length || !this.searchAllEnabled ? 0 : W2;
  }
  set activeSourceIndex(e9) {
    this._overrideIfSome("activeSourceIndex", e9);
  }
  get allPlaceholder() {
    var _a;
    return (_a = this.messages) == null ? void 0 : _a.allPlaceholder;
  }
  set allPlaceholder(e9) {
    this._overrideIfSome("allPlaceholder", e9);
  }
  get allSources() {
    const { sources: e9, defaultSources: t4, includeDefaultSources: s10 } = this, r = "function" == typeof s10 ? s10.call(null, { sources: e9, defaultSources: t4 }) : s10 ? t4.concat(e9) : e9, o4 = this._get("allSources") || new Z();
    return o4.removeAll(), o4.addMany(r.filter(Boolean)), o4;
  }
  get locationEnabled() {
    return this._get("locationEnabled") || g4();
  }
  set locationEnabled(e9) {
    if (void 0 === e9)
      return void this._clearOverride("locationEnabled");
    const t4 = g4();
    if (e9 && !t4) {
      const e10 = new s3("locationEnabled:geolocation-unsupported", "Geolocation API is unsupported.", { geolocation: navigator.geolocation });
      B2.error(e10);
    }
    this._override("locationEnabled", !!e9 && t4);
  }
  get placeholder() {
    const { allSources: e9, activeSourceIndex: t4, allPlaceholder: s10 } = this;
    if (t4 === W2)
      return s10 ?? "";
    const r = e9.at(t4);
    return (r == null ? void 0 : r.placeholder) ?? "";
  }
  set searchTerm(e9) {
    this._set("searchTerm", e9 || ""), this.clearGraphics(), this.selectedSuggestion && this.selectedSuggestion.text !== e9 && this._set("selectedSuggestion", null), "" === e9 && this._clear();
  }
  get searchTerm() {
    return this._get("searchTerm") || "";
  }
  get state() {
    return this._searching ? "searching" : this.updating ? "loading" : 0 === this.allSources.length ? "disabled" : "ready";
  }
  get updating() {
    return null != this._updatingPromise;
  }
  clear() {
    this.searchTerm = "";
  }
  clearGraphics() {
    this._removeHighlight(), this._closePopup();
    const { view: e9, resultGraphic: t4 } = this;
    e9 && t4 && e9.graphics.remove(t4), this._set("resultGraphic", null);
  }
  search(e9, t4) {
    this.emit("search-start"), this.clearGraphics();
    const s10 = this._createSuggestionForSearch(e9), r = (async () => {
      var _a;
      try {
        await this.when();
        const e10 = await this._getResultsFromSources(s10, t4);
        if ((_a = t4 == null ? void 0 : t4.signal) == null ? void 0 : _a.aborted)
          return null;
        const r2 = { activeSourceIndex: this.activeSourceIndex, searchTerm: s10.text ?? "", numResults: 0, numErrors: 0, errors: [], results: [] };
        this._formatResponse(r2, e10, s10);
        const o4 = this._getFirstResult(r2.results), i9 = s10.location && o4 ? o4.name : s10.text, l9 = i9 == null ? void 0 : i9.replace(K2, "");
        return this._set("searchTerm", l9), (s10.key && "number" == typeof s10.sourceIndex || s10.location) && this._set("selectedSuggestion", s10), this._set("results", r2.results), this._set("resultCount", r2.results.reduce((e11, t5) => {
          var _a2;
          return e11 + (((_a2 = t5.results) == null ? void 0 : _a2.length) ?? 0);
        }, 0)), this.emit("search-complete", r2), await this._selectFirstResult(o4), r2;
      } finally {
        this._clearSearching();
      }
    })();
    return this._searching = r, r;
  }
  async searchNearby(e9) {
    if (!this.locationEnabled) {
      const e10 = new s3("searchNearby:geolocation-unsupported", "Geolocation API is unsupported.", { geolocation: navigator.geolocation });
      throw B2.error(e10), e10;
    }
    const t4 = (async () => {
      try {
        const t5 = await p6(), s10 = await f7({ position: t5, view: this.view }, e9);
        return await this.search(s10, e9);
      } finally {
        this._clearSearching();
      }
    })();
    return this._searching = t4, t4;
  }
  async select(e9) {
    if (this.clearGraphics(), !e9) {
      const t5 = new s3("select:missing-parameter", "Cannot select without a searchResult.", { searchResult: e9 });
      throw B2.error(t5), t5;
    }
    const { view: t4 } = this, s10 = H2(e9, "sourceIndex") ? e9.sourceIndex : this._getSourceIndexOfResult(e9), o4 = null != s10 ? this.allSources.at(s10) : null;
    if (!o4) {
      const e10 = new s3("select:missing-source", "Cannot select without a source.", { source: o4 });
      throw B2.error(e10), e10;
    }
    const i9 = o4 instanceof n6 ? this._getLayerSourcePopupTemplate(o4) : o4.popupTemplate, l9 = o4.resultSymbol || this._getDefaultSymbol(e9), a9 = H2(o4, "resultGraphicEnabled") ? o4.resultGraphicEnabled : this.resultGraphicEnabled, u4 = H2(o4, "autoNavigate") ? o4.autoNavigate : this.autoNavigate, c7 = (H2(o4, "popupEnabled") ? o4.popupEnabled : this.popupEnabled) ? i9 || this.popupTemplate || this.defaultPopupTemplate : null, { feature: p7 } = e9;
    if (!p7) {
      const e10 = new s3("select:missing-feature", "Cannot select without a feature.", { feature: p7 });
      throw B2.error(e10), e10;
    }
    const { attributes: g5, geometry: d10, layer: m8, sourceLayer: y6 } = p7, f9 = s9(d10), S4 = { layerViewQuery: this._getLayerView(p7), elevationQuery: t4 && null != f9 ? o2(f9, t4).catch(() => f9) : Promise.resolve(f9) }, _ = await j(S4), v4 = _.layerViewQuery.value, w4 = _.elevationQuery.value;
    l9 instanceof m3 && (l9.text = e9.name);
    const b3 = t4 && u4 ? e9.target || e9.extent : null, L3 = null != b3 ? this._goToSearchResult(b3) : Promise.resolve();
    await L3;
    const T4 = v4 ? p7 : new h3({ geometry: d10, symbol: l9, attributes: g5, layer: m8, sourceLayer: y6, popupTemplate: c7 }), F2 = t4 == null ? void 0 : t4.popup, j9 = F2 && T4.getEffectivePopupTemplate(F2.defaultPopupTemplateEnabled);
    return j9 && await t4.openPopup({ features: [T4], location: w4 }), v4 && n4(v4) && !j9 && this._highlightFeature({ graphic: T4, layerView: v4 }), !v4 && a9 && t4 && t4.graphics.push(T4), this._setResultFloor(e9), this._set("selectedResult", e9), this._set("resultGraphic", T4), this.emit("select-result", { result: e9, source: o4, sourceIndex: s10 }), e9;
  }
  async suggest(e9, t4, s10) {
    const r = e9 || this.searchTerm;
    this.emit("suggest-start", { searchTerm: r }), await this._suggestTimer(t4, s10);
    const o4 = await this._suggestImmediate(r, s10);
    return this._set("suggestions", o4 == null ? void 0 : o4.results), this._set("suggestionCount", (o4 == null ? void 0 : o4.results.reduce((e10, t5) => {
      var _a;
      return e10 + (((_a = t5.results) == null ? void 0 : _a.length) ?? 0);
    }, 0)) ?? null), this.emit("suggest-complete", o4), o4;
  }
  async when() {
    await j3(() => !this.updating);
  }
  async _update() {
    const { portal: e9, view: t4 } = this;
    if (this.includeDefaultSources) {
      const s10 = this._updatingPromise = j([e9 == null ? void 0 : e9.load(), t4 == null ? void 0 : t4.when()]);
      if (this.destroyed)
        return;
      if (await s10, s10 !== this._updatingPromise)
        return;
    }
    await j3(() => this.messages), this.destroyed || this._updateDefaultSources(), this._updatingPromise = null;
  }
  _clearSearching() {
    this._searching = null;
  }
  _convertHelperServices() {
    var _a, _b;
    const e9 = (_b = (_a = this.portal) == null ? void 0 : _a.helperServices) == null ? void 0 : _b.geocode;
    if (!e9)
      return [];
    return e9.map((e10) => {
      var _a2;
      if (false === e10.placefinding)
        return;
      const t4 = s.apiKey && x3(e10.url) ? { url: S3 } : null, r = c5.fromJSON({ ...e10, ...t4 }), o4 = r.url;
      if (x3(o4) || y3(o4) || p4(o4)) {
        const e11 = r.outFields ?? ["Addr_type", "Match_addr", "StAddr", "City"], t5 = (r.placeholder || ((_a2 = this.messages) == null ? void 0 : _a2.placeholder)) ?? "", s10 = "number" == typeof r.defaultZoomScale ? r.defaultZoomScale : 2500;
        r.singleLineFieldName = "SingleLine", r.outFields = e11, r.placeholder = t5, r.defaultZoomScale = s10;
      }
      return r.singleLineFieldName ? r : void 0;
    }).filter(R);
  }
  _destroyFeatureLayers() {
    this._createdFeatureLayers.forEach((e9) => e9 == null ? void 0 : e9.destroy()), this._createdFeatureLayers = [];
  }
  _getLayerSources(e9, t4) {
    var _a;
    const s10 = (_a = this.view) == null ? void 0 : _a.map;
    return e9.map((e10) => {
      const r = s10.findLayerById(e10.id);
      if (!r)
        return;
      const o4 = this._getLayerJSON(e10), i9 = n6.fromJSON(o4);
      return i9.placeholder = t4, this._getLayer(r, o4).then((e11) => {
        i9.layer = e11;
      }), i9;
    }).filter(R).toArray();
  }
  _getTableSources(e9, t4) {
    var _a;
    const s10 = (_a = this.view) == null ? void 0 : _a.map;
    return e9.map((e10) => {
      if (!e10.id)
        return;
      const r = s10.findTableById(e10.id);
      if (!r)
        return;
      const o4 = this._getLayerJSON(e10), i9 = n6.fromJSON(o4);
      return i9.placeholder = t4, this._getLayer(r, o4).then((e11) => {
        i9.layer = e11;
      }), i9;
    }).filter(R).toArray();
  }
  _convertApplicationProperties() {
    var _a, _b, _c;
    const e9 = (_a = this.view) == null ? void 0 : _a.map, t4 = (_c = (_b = e9 == null ? void 0 : e9.applicationProperties) == null ? void 0 : _b.viewing) == null ? void 0 : _c.search;
    if (!t4)
      return [];
    const { enabled: s10, hintText: r, layers: o4, tables: i9 } = t4;
    if (!s10)
      return [];
    return [...this._getLayerSources(o4, r), ...this._getTableSources(i9, r)];
  }
  async _getSubLayer(e9, t4) {
    var _a;
    if (await e9.load(), !e9.allSublayers)
      throw new Error();
    const s10 = e9.allSublayers.find((e10) => e10.id === t4.subLayer);
    if (!s10)
      throw new Error();
    const r = await ((_a = s10.createFeatureLayer) == null ? void 0 : _a.call(s10));
    if (!r)
      throw new Error();
    return this._createdFeatureLayers.push(r), r;
  }
  async _getBuildingSubLayer(e9, t4) {
    await e9.load();
    const s10 = e9.allSublayers.find((e10) => e10.id === t4.subLayer);
    if ("building-component" !== (s10 == null ? void 0 : s10.type))
      throw new Error();
    if (await s10.load(), null == s10.associatedLayer)
      throw new Error();
    return await s10.associatedLayer.load(), s10;
  }
  async _getLayer(e9, t4) {
    if ("feature" === e9.type || "scene" === e9.type || "csv" === e9.type || "geojson" === e9.type || "ogc-feature" === e9.type)
      return e9;
    if ("map-image" === e9.type)
      try {
        return await this._getSubLayer(e9, t4);
      } catch (s10) {
        const t5 = new s3("search:create-featurelayer", "Could not create a FeatureLayer from the MapImageLayer", { layer: e9 });
        return B2.error(t5), null;
      }
    return "building-scene" === e9.type ? this._getBuildingSubLayer(e9, t4) : null;
  }
  _getLayerJSON(e9) {
    return "function" == typeof e9.toJSON ? e9.toJSON() : e9;
  }
  _updateDefaultSources() {
    const { defaultSources: e9, includeDefaultSources: t4 } = this;
    this._destroyFeatureLayers(), e9.removeAll(), t4 && e9.addMany([...this._convertApplicationProperties(), ...this._convertHelperServices()]);
  }
  _abortGoTo() {
    this._gotoController && this._gotoController.abort(), this._gotoController = null;
  }
  _clear() {
    this._abortGoTo(), this._set("resultCount", null), this._set("results", null), this._set("suggestions", null), this._set("suggestionCount", null), this._set("selectedResult", null), this._set("selectedSuggestion", null), this.emit("search-clear");
  }
  _closePopup() {
    var _a;
    const e9 = (_a = this.view) == null ? void 0 : _a.popup, { resultGraphic: t4 } = this;
    if (!e9 || !t4)
      return;
    const s10 = "selectedFeature" in e9, r = s10 ? e9.selectedFeature : null;
    s10 && (r && r === t4) && e9.close();
  }
  _suggestTimer(e9, t4) {
    const s10 = null != e9 ? e9 : this.suggestionDelay;
    return g(s10, null, t4 && t4.signal);
  }
  _createLocationForSearch(e9) {
    return e9 instanceof h3 ? s9(e9.geometry) : e9 instanceof x ? e9 : Array.isArray(e9) && 2 === e9.length ? new x({ longitude: e9[0], latitude: e9[1] }) : null;
  }
  _createSuggestionForSearch(e9) {
    if (e9 && H2(e9, "key") && H2(e9, "text") && H2(e9, "sourceIndex"))
      return e9;
    const t4 = this._createLocationForSearch(e9), s10 = "string" == typeof e9 ? e9 : this.searchTerm, { selectedSuggestion: r, selectedResult: o4 } = this, i9 = !e9 && r && o4, l9 = i9 && r.key === o4.key && r.sourceIndex === o4.sourceIndex, a9 = i9 && r.location;
    return l9 || a9 ? r : { location: t4, text: t4 ? "" : s10, sourceIndex: null, key: null };
  }
  _getFirstResult(e9) {
    let t4 = null;
    return e9 && e9.some((e10) => {
      const { results: s10 } = e10, r = s10 == null ? void 0 : s10[0], o4 = !!r;
      return o4 && (t4 = r), o4;
    }), t4;
  }
  async _selectFirstResult(e9) {
    return this.autoSelect && e9 ? this.select(e9) : null;
  }
  async _suggestImmediate(e9, t4) {
    var _a;
    await this.when();
    const s10 = await this._getSuggestionsFromSources(e9, t4);
    if ((_a = t4 == null ? void 0 : t4.signal) == null ? void 0 : _a.aborted)
      return null;
    const r = { activeSourceIndex: this.activeSourceIndex, searchTerm: e9 ?? "", numResults: 0, numErrors: 0, errors: [], results: [] };
    return this._formatResponse(r, s10), r;
  }
  _formatSourceResponse(e9, t4, s10) {
    const r = (t4 == null ? void 0 : t4.value) || [], o4 = t4 == null ? void 0 : t4.error, i9 = this.allSources.at(s10);
    if (o4) {
      const t5 = { sourceIndex: s10, source: i9, error: o4 };
      e9.errors.push(t5), B2.error(o4), e9.numErrors++;
    } else {
      const t5 = { sourceIndex: s10, source: i9, results: r };
      e9.results.push(t5), e9.numResults += r.length;
    }
  }
  _formatResponse(e9, t4, s10) {
    if (t4)
      if (e9.activeSourceIndex === W2) {
        const r = s10 && H2(s10, "sourceIndex") && -1 !== s10.sourceIndex ? s10.sourceIndex : void 0;
        t4.forEach((t5, s11) => {
          const o4 = void 0 !== r ? r : s11;
          this._formatSourceResponse(e9, t5, o4);
        });
      } else
        this._formatSourceResponse(e9, t4[0], e9.activeSourceIndex);
  }
  async _getResultsFromSources(e9, t4) {
    const { allSources: s10 } = this, r = !e9.location && H2(e9, "sourceIndex") ? e9.sourceIndex : this.activeSourceIndex, o4 = [];
    if (!s10.length) {
      const e10 = new s3("search:no-sources-defined", "At least one source is required.", { allSources: s10 });
      throw B2.error(e10), e10;
    }
    return r === W2 ? s10.forEach((s11, r2) => {
      o4.push(this._getResultsFromSource(e9, r2, t4));
    }) : o4.push(this._getResultsFromSource(e9, r, t4)), j(o4);
  }
  async _getSuggestionsFromSources(e9, t4) {
    const { allSources: s10, activeSourceIndex: r } = this, o4 = [];
    if (!s10.length) {
      const e10 = new s3("suggest:no-sources-defined", "At least one source is required.", { allSources: s10 });
      throw B2.error(e10), e10;
    }
    return r === W2 ? s10.forEach((s11, r2) => {
      o4.push(this._getSuggestionsFromSource(e9, r2, t4));
    }) : o4.push(this._getSuggestionsFromSource(e9, r, t4)), j(o4);
  }
  async _getResultsFromSource(e9, t4, s10) {
    var _a, _b;
    const r = null != t4 ? this.allSources.at(t4) : null;
    if (!r)
      return null;
    const { location: o4 = null } = e9, i9 = ((_a = this.view) == null ? void 0 : _a.spatialReference) || q2, l9 = H2(r, "maxResults") ? r.maxResults : this.maxResults, a9 = !!(r instanceof n6 && H2(r, "exactMatch")) && r.exactMatch, { view: n11 } = this;
    return (_b = r.getResults) == null ? void 0 : _b.call(r, { view: n11, sourceIndex: t4, location: o4, suggestResult: e9, spatialReference: i9, exactMatch: a9, maxResults: l9 }, s10);
  }
  async _getSuggestionsFromSource(e9, t4, s10) {
    var _a, _b;
    const r = this.allSources.at(t4);
    if (!r)
      return null;
    e9 ?? (e9 = "");
    const o4 = H2(r, "suggestionsEnabled") ? r.suggestionsEnabled : this.suggestionsEnabled, i9 = e9 == null ? void 0 : e9.length, l9 = H2(r, "minSuggestCharacters") ? r.minSuggestCharacters : this.minSuggestCharacters;
    if (o4 && e9.trim() && i9 >= l9) {
      const o5 = ((_a = this.view) == null ? void 0 : _a.spatialReference) || q2, i10 = H2(r, "maxSuggestions") ? r.maxSuggestions : this.maxSuggestions, { view: l10 } = this, a9 = !!(r instanceof n6 && H2(r, "exactMatch")) && r.exactMatch;
      return (_b = r.getSuggestions) == null ? void 0 : _b.call(r, { view: l10, sourceIndex: t4, suggestTerm: e9, spatialReference: o5, maxSuggestions: i10, exactMatch: a9 }, s10);
    }
    return null;
  }
  _getLayerSourcePopupTemplate(e9) {
    const { layer: t4 } = e9;
    if (t4)
      return H2(e9, "popupTemplate") ? e9.popupTemplate : t4.popupTemplate;
  }
  _getSourceIndexOfResult(e9) {
    const t4 = this.results;
    if (!t4)
      return null;
    let s10 = null;
    return t4.some((t5) => t5.results.some((r) => r === e9 && (s10 = t5.sourceIndex, true))), s10;
  }
  async _goToSearchResult(e9) {
    this._abortGoTo();
    const t4 = new AbortController();
    this._gotoController = t4;
    const s10 = { target: { target: e9 }, options: { signal: t4.signal } };
    e9 || (s10.options.animate = false), await this.callGoTo(s10), this._gotoController = null;
  }
  _getDefaultSymbol(e9) {
    var _a;
    const { defaultSymbols: t4 } = this, s10 = (_a = e9.feature) == null ? void 0 : _a.geometry;
    if (null == s10)
      return null;
    switch (s10.type) {
      case "point":
      case "multipoint":
        return t4.point;
      case "polyline":
        return t4.polyline;
      case "extent":
      case "polygon":
        return t4.polygon;
      default:
        return null;
    }
  }
  _removeHighlight() {
    this.removeHandles(Q);
  }
  async _getLayerView(e9) {
    var _a, _b;
    const { view: t4 } = this;
    if (!e9 || !t4 || "building-component" === ((_a = e9.layer) == null ? void 0 : _a.type) || "subtype-sublayer" === ((_b = e9.layer) == null ? void 0 : _b.type))
      return null;
    const { layer: s10 } = e9;
    return s10 ? (await t4.when(), t4.whenLayerView(s10)) : null;
  }
  _highlightFeature(e9) {
    const { graphic: t4, layerView: s10 } = e9, { attributes: r, layer: o4 } = t4, { objectIdField: i9 } = o4, l9 = (i9 && (r == null ? void 0 : r[i9])) ?? null, a9 = s10.highlight(l9 ?? t4);
    this.addHandles(a9, Q);
  }
  _setResultFloor(e9) {
    var _a, _b, _c;
    const { view: t4 } = this, s10 = (_a = e9.feature) == null ? void 0 : _a.attributes, r = (_b = e9.feature) == null ? void 0 : _b.sourceLayer;
    if (r && "floorInfo" in r && ((_c = r == null ? void 0 : r.floorInfo) == null ? void 0 : _c.floorField) && s10) {
      const e10 = s10[r.floorInfo.floorField];
      t4 == null ? void 0 : t4.emit("select-result-floor", e10);
    }
  }
};
X.ALL_INDEX = W2, e([y()], X.prototype, "_searching", void 0), e([y()], X.prototype, "_updatingPromise", void 0), e([y({ readOnly: true, value: null })], X.prototype, "activeSource", null), e([y()], X.prototype, "activeSourceIndex", null), e([y()], X.prototype, "allPlaceholder", null), e([y({ readOnly: true })], X.prototype, "allSources", null), e([y()], X.prototype, "autoNavigate", void 0), e([y()], X.prototype, "autoSelect", void 0), e([y()], X.prototype, "defaultPopupTemplate", void 0), e([y({ readOnly: true })], X.prototype, "defaultSources", void 0), e([y()], X.prototype, "defaultSymbols", void 0), e([y()], X.prototype, "includeDefaultSources", void 0), e([y()], X.prototype, "locationEnabled", null), e([y()], X.prototype, "maxInputLength", void 0), e([y()], X.prototype, "maxResults", void 0), e([y()], X.prototype, "maxSuggestions", void 0), e([y()], X.prototype, "messages", void 0), e([y()], X.prototype, "minSuggestCharacters", void 0), e([y({ readOnly: true })], X.prototype, "placeholder", null), e([y()], X.prototype, "popupEnabled", void 0), e([y({ type: k2 })], X.prototype, "popupTemplate", void 0), e([y({ type: j5 })], X.prototype, "portal", void 0), e([y()], X.prototype, "resultCount", void 0), e([y()], X.prototype, "resultGraphicEnabled", void 0), e([y({ readOnly: true })], X.prototype, "resultGraphic", void 0), e([y({ readOnly: true })], X.prototype, "results", void 0), e([y({ readOnly: true })], X.prototype, "selectedSuggestion", void 0), e([y()], X.prototype, "searchAllEnabled", void 0), e([y({ readOnly: true })], X.prototype, "selectedResult", void 0), e([y()], X.prototype, "searchTerm", null), e([y({ type: Z })], X.prototype, "sources", void 0), e([y({ readOnly: true })], X.prototype, "state", null), e([y()], X.prototype, "suggestionDelay", void 0), e([y()], X.prototype, "suggestionCount", void 0), e([y({ readOnly: true })], X.prototype, "suggestions", void 0), e([y()], X.prototype, "suggestionsEnabled", void 0), e([y({ readOnly: true })], X.prototype, "updating", null), e([y()], X.prototype, "view", void 0), e([y()], X.prototype, "clear", null), X = e([a2(U2)], X);
var Y = X;

// node_modules/@arcgis/core/widgets/Search/SearchResultRenderer.js
var c6 = class extends W {
  constructor(e9, s10) {
    super(e9, s10), this.messages = null, this.showMoreResultsOpen = false, this.viewModel = null;
  }
  destroy() {
    this.viewModel = null;
  }
  render() {
    const e9 = { [s8.showMoreResults]: this.showMoreResultsOpen };
    return n2("div", { class: s8.base }, n2("div", { key: "esri-search-renderer__container", class: this.classes(s8.moreResults, e9) }, this.renderSearchResultName(), this.renderMoreResults()));
  }
  renderMoreResults() {
    return n2("div", { key: "esri-search-renderer__more-results" }, this.renderMoreResultsButton(), this.renderMoreResultsLists());
  }
  renderSearchResultName() {
    var _a;
    const e9 = (_a = this.viewModel) == null ? void 0 : _a.selectedResult, s10 = e9 && e9.name || "";
    return n2("div", { key: "esri-search-renderer__result-name", class: s8.moreResultsItem }, s10);
  }
  renderMoreResultsLists() {
    const { viewModel: e9 } = this;
    if (!e9)
      return [];
    const s10 = e9.results;
    if ((e9.resultCount ?? 0) < 2)
      return null;
    const r = s10 == null ? void 0 : s10.map((e10) => this.renderMoreResultsList(e10));
    return n2("div", { key: "esri-search-renderer__more-results-container", class: s8.moreResultsList }, r);
  }
  renderMoreResultsButton() {
    const { messages: e9, viewModel: s10 } = this;
    if (!s10)
      return null;
    return (s10.resultCount ?? 0) < 2 ? null : n2("div", { key: "esri-search-renderer__more-results-button", class: s8.moreResultsItem }, n2("a", { class: s8.anchor, href: "#", bind: this, onclick: this._showMoreResultsClick, onkeydown: this._showMoreResultsClick }, this.showMoreResultsOpen ? e9.hideMoreResults : e9.showMoreResults));
  }
  renderMoreResultsHeader(e9, s10) {
    return n2("div", { key: `esri-search-result-renderer__header-${s10}`, class: s8.moreResultsListHeader }, e9);
  }
  renderMoreResultsList(e9) {
    var _a, _b, _c;
    const { results: s10 } = e9, r = (s10 == null ? void 0 : s10.length) ?? 0, t4 = r > 0, o4 = (_a = this.viewModel) == null ? void 0 : _a.selectedResult, l9 = 1 === r && s10[0] === o4, i9 = this._getSourceName(e9.source, e9.sourceIndex), u4 = (((_c = (_b = this.viewModel) == null ? void 0 : _b.results) == null ? void 0 : _c.length) ?? 0) > 1 && !l9 ? this.renderMoreResultsHeader(i9, e9.sourceIndex) : null, c7 = t4 && s10.map((e10, s11) => this.renderMoreResultsListItem(e10, s11)), d10 = t4 && !l9 ? n2("ul", { key: `esri-search-result-renderer__list-${e9.sourceIndex}` }, c7) : null;
    return t4 ? n2("div", { key: `esri-search-result-renderer__results-${e9.sourceIndex}` }, u4, d10) : null;
  }
  renderMoreResultsListItem(e9, s10) {
    return e9 !== this.get("viewModel.selectedResult") ? n2("li", { key: `esri-search-result-renderer__list-item-${s10}` }, n2("a", { class: s8.anchor, href: "#", tabindex: "0", bind: this, "data-result": e9, onclick: this._selectResultClick, onkeydown: this._selectResultClick }, e9.name)) : null;
  }
  _showMoreResultsClick(e9) {
    e9.preventDefault(), this.showMoreResultsOpen = !this.showMoreResultsOpen;
    const s10 = this.get("viewModel.view.popup");
    s10 && s10.reposition();
  }
  _selectResultClick(e9) {
    var _a;
    e9.preventDefault();
    const s10 = e9.currentTarget["data-result"];
    (_a = this.viewModel) == null ? void 0 : _a.select(s10);
  }
  _getSourceName(e9, s10) {
    return s10 === Y.ALL_INDEX ? this.messages.all : e9.name;
  }
};
e([y(), e3("esri/widgets/Search/t9n/Search")], c6.prototype, "messages", void 0), e([y()], c6.prototype, "showMoreResultsOpen", void 0), e([y()], c6.prototype, "viewModel", void 0), e([t()], c6.prototype, "_showMoreResultsClick", null), e([t()], c6.prototype, "_selectResultClick", null), c6 = e([a2("esri.widgets.Search.SearchResultRenderer")], c6);
var d9 = c6;

// node_modules/@arcgis/core/widgets/Search.js
var w3 = /<[a-z/][\s\S]*>/i;
var b2 = (e9, t4) => {
  const s10 = o(t4).split(/\s/), r = new RegExp(`(${s10.join("|")})`, "gi");
  return e9.replace(r, (e10) => `<strong>${e10}</strong>`);
};
var y5 = class extends W {
  constructor(e9, t4) {
    super(e9, t4), this._activeMenuItemIndex = -1, this._inputNode = null, this._menuItemCount = 0, this._sourceMenuButtonNode = null, this._sourceListNode = null, this._suggestionListNode = null, this._searchResultRenderer = new d9(), this._suggestController = null, this._searchController = null, this._locateFailed = false, this._container = null, this.activeMenu = "none", this.disabled = false, this.iconClass = i4.widgetIcon, this.icon = null, this.messages = null, this.messagesCommon = null, this.viewModel = new Y(), this._clearActiveMenu = () => {
      this.activeMenu = "none";
    }, this._removeActiveMenu = (e10) => {
      var _a;
      const t5 = e10.relatedTarget;
      t5 && ((_a = this._container) == null ? void 0 : _a.contains(t5)) || this._clearActiveMenu();
    }, this.addHandles([l3(() => this.searchTerm, (e10) => {
      (e10 && "warning" === this.activeMenu || !e10 && !this.get("viewModel.selectedSuggestion.location")) && this._clearActiveMenu();
    }), a3(() => {
      var _a;
      return (_a = this.viewModel) == null ? void 0 : _a.allSources;
    }, "change", () => this._watchSourceChanges()), l3(() => this.activeMenu, () => this._resetActiveMenuItemIndex(), h), l3(() => {
      var _a;
      return (_a = this.viewModel) == null ? void 0 : _a.defaultPopupTemplate;
    }, (e10) => {
      e10 && (e10.content = this._renderSearchResultsContent.bind(this));
    }, h)]);
  }
  destroy() {
    this.removeAllHandles(), this._cancelSuggest(), this._cancelSearch(), this._searchResultRenderer = l(this._searchResultRenderer);
  }
  get displayedSearchTerm() {
    return `${this.viewModel.searchTerm}`.trim();
  }
  get inputId() {
    return this._buildId("input");
  }
  get suggestionsMenuId() {
    return this._buildId("suggest-menu");
  }
  get sourceMenuId() {
    return this._buildId("source-menu");
  }
  get sourceMenuButtonId() {
    return this._buildId("source-menu-button");
  }
  get activeSource() {
    var _a;
    return (_a = this.viewModel) == null ? void 0 : _a.activeSource;
  }
  get activeSourceIndex() {
    return this.viewModel.activeSourceIndex;
  }
  set activeSourceIndex(e9) {
    this.viewModel.activeSourceIndex = e9;
  }
  get allPlaceholder() {
    return this.viewModel.allPlaceholder;
  }
  set allPlaceholder(e9) {
    this.viewModel.allPlaceholder = e9;
  }
  get allSources() {
    return this.viewModel.allSources;
  }
  get autoNavigate() {
    return this.viewModel.autoNavigate;
  }
  set autoNavigate(e9) {
    this.viewModel.autoNavigate = e9;
  }
  get autoSelect() {
    return this.viewModel.autoSelect;
  }
  set autoSelect(e9) {
    this.viewModel.autoSelect = e9;
  }
  get defaultSources() {
    return this.viewModel.defaultSources;
  }
  get goToOverride() {
    return this.viewModel.goToOverride;
  }
  set goToOverride(e9) {
    this.viewModel.goToOverride = e9;
  }
  get includeDefaultSources() {
    return this.viewModel.includeDefaultSources;
  }
  set includeDefaultSources(e9) {
    this.viewModel.includeDefaultSources = e9;
  }
  get label() {
    var _a;
    return ((_a = this.messages) == null ? void 0 : _a.widgetLabel) ?? "";
  }
  set label(e9) {
    this._overrideIfSome("label", e9);
  }
  get locationEnabled() {
    return this.viewModel.locationEnabled;
  }
  set locationEnabled(e9) {
    this.viewModel.locationEnabled = e9;
  }
  get maxResults() {
    return this.viewModel.maxResults;
  }
  set maxResults(e9) {
    this.viewModel.maxResults = e9;
  }
  get maxSuggestions() {
    return this.viewModel.maxSuggestions;
  }
  set maxSuggestions(e9) {
    this.viewModel.maxSuggestions = e9;
  }
  get minSuggestCharacters() {
    return this.viewModel.minSuggestCharacters;
  }
  set minSuggestCharacters(e9) {
    this.viewModel.minSuggestCharacters = e9;
  }
  get popupEnabled() {
    return this.viewModel.popupEnabled;
  }
  set popupEnabled(e9) {
    this.viewModel.popupEnabled = e9;
  }
  get popupTemplate() {
    return this.viewModel.popupTemplate;
  }
  set popupTemplate(e9) {
    this.viewModel.popupTemplate = e9;
  }
  get portal() {
    var _a;
    return (_a = this.viewModel) == null ? void 0 : _a.portal;
  }
  set portal(e9) {
    this.viewModel && (this.viewModel.portal = e9);
  }
  get resultGraphic() {
    return this.viewModel.resultGraphic;
  }
  set resultGraphic(e9) {
    this.viewModel.resultGraphic = e9;
  }
  get resultGraphicEnabled() {
    return this.viewModel.resultGraphicEnabled;
  }
  set resultGraphicEnabled(e9) {
    this.viewModel.resultGraphicEnabled = e9;
  }
  get results() {
    return this.viewModel.results;
  }
  get searchAllEnabled() {
    return this.viewModel.searchAllEnabled;
  }
  set searchAllEnabled(e9) {
    this.viewModel.searchAllEnabled = e9;
  }
  get searchTerm() {
    return this.viewModel.searchTerm;
  }
  set searchTerm(e9) {
    this.viewModel.searchTerm = e9;
  }
  get selectedResult() {
    return this.viewModel.selectedResult;
  }
  get sources() {
    return this.viewModel.sources;
  }
  set sources(e9) {
    this.viewModel.sources = e9;
  }
  get suggestions() {
    return this.viewModel.suggestions;
  }
  get suggestionsEnabled() {
    return this.viewModel.suggestionsEnabled;
  }
  set suggestionsEnabled(e9) {
    this.viewModel.suggestionsEnabled = e9;
  }
  get view() {
    return this.viewModel.view;
  }
  set view(e9) {
    this.viewModel.view = e9;
  }
  clear() {
    this.viewModel.clear();
  }
  focus() {
    var _a;
    (_a = this._inputNode) == null ? void 0 : _a.focus(), this.emit("search-focus");
  }
  blur() {
    var _a;
    (_a = this._inputNode) == null ? void 0 : _a.blur(), this.emit("search-blur");
  }
  async search(e9) {
    this._clearActiveMenu(), this._cancelSuggest(), this._cancelSearch();
    const t4 = new AbortController(), { signal: s10 } = t4;
    this._searchController = t4;
    try {
      const r = await this.viewModel.search(e9, { signal: s10 });
      if (this._searchController !== t4)
        return;
      return this.activeMenu = (r == null ? void 0 : r.numResults) ? "none" : "warning", this._searchController = null, r;
    } catch (r) {
      if (this._searchController !== t4)
        return;
      return this._clearActiveMenu(), void (this._searchController = null);
    }
  }
  async suggest(e9) {
    this._cancelSuggest();
    const t4 = new AbortController(), { signal: s10 } = t4;
    this._suggestController = t4;
    try {
      const r = await this.viewModel.suggest(e9, null, { signal: s10 });
      if (this._suggestController !== t4)
        return;
      return this._suggestController = null, (r == null ? void 0 : r.numResults) && this._openSuggestionMenu(), this._scrollToTopSuggestion(), r;
    } catch (r) {
      return this._suggestController !== t4 || (this._suggestController = null), null;
    }
  }
  render() {
    const { state: e9 } = this.viewModel, t4 = { [i4.disabled]: "disabled" === e9, [i4.esriWidgetDisabled]: this.disabled };
    return n2("div", { class: this.classes(i4.base, t4) }, "loading" === e9 ? this.renderLoader() : this.renderContainer());
  }
  renderSubmitButton() {
    const { messages: e9, disabled: t4 } = this;
    return n2("button", { "aria-label": e9.searchButtonTitle, bind: this, disabled: t4, class: this.classes(i4.submitButton, i4.button), key: "esri-search__submit-button", onclick: this._handleSearchButtonClick, title: e9.searchButtonTitle, type: "button" }, n2("span", { "aria-hidden": "true", class: i4.searchIcon }));
  }
  renderWarningMenu() {
    return n2("div", { key: "esri-search__error-menu", class: this.classes(i4.menu, i4.warningMenu) }, n2("div", { class: i4.warningMenuBody }, this.renderWarning()));
  }
  renderSourceMenuButton() {
    const { messages: e9, activeMenu: t4, sourceMenuId: s10, sourceMenuButtonId: r, disabled: n11 } = this, { activeSourceIndex: i9, allSources: o4 } = this.viewModel;
    return o4.length > 1 ? n2("button", { id: r, key: "esri-search__source-menu-button", bind: this, disabled: n11, "aria-label": e9.searchIn, title: e9.searchIn, "aria-haspopup": "true", "aria-expanded": ("source" === t4).toString(), "aria-controls": s10, class: this.classes(i4.sourcesButton, i4.button), onclick: this._handleSourcesMenuToggleClick, onfocus: this._handleSourcesMenuToggleFocus, afterCreate: L, "data-node-ref": "_sourceMenuButtonNode", type: "button" }, n2("span", { "aria-hidden": "true", class: i4.dropdownIcon }), n2("span", { "aria-hidden": "true", class: i4.dropupIcon }), n2("span", { class: i4.sourceName }, this._getSourceName(i9))) : null;
  }
  renderSourcesList() {
    const { allSources: e9, searchAllEnabled: t4 } = this.viewModel, { _activeMenuItemIndex: s10, activeMenu: r, sourceMenuId: n11, sourceMenuButtonId: i9 } = this, o4 = "source" === r && s10 > -1 ? this._buildId("source-item", s10) : null;
    return e9.length > 1 ? n2("ul", { "aria-activedescendant": o4, "aria-labelledby": i9, id: n11, role: "menu", bind: this, afterCreate: L, onkeydown: this._handleSourceMenuKeydown, onkeyup: this._handleSourceMenuKeyup, "data-node-ref": "_sourceListNode", class: i4.menuList, tabIndex: -1 }, t4 ? this.renderSource(Y.ALL_INDEX) : null, e9.map((e10, t5) => this.renderSource(t5)).toArray()) : null;
  }
  renderSourcesMenu() {
    const { allSources: e9 } = this.viewModel;
    return e9.length > 1 ? n2("div", { key: "esri-search__source-menu", class: this.classes(i4.menu, i4.sourcesMenu) }, this.renderSourcesList()) : null;
  }
  renderLoader() {
    const { messages: e9, messagesCommon: t4, disabled: s10 } = this;
    return n2("div", { class: i4.loader, key: "base-loader", tabIndex: s10 ? -1 : void 0 }, n2("span", { "aria-hidden": "true", class: i4.loaderAnimation }), n2("span", { class: i4.fallbackText }, e9.searchButtonTitle), n2("span", { class: i4.loaderText }, t4.loading));
  }
  renderContainer() {
    const { allSources: e9, state: t4 } = this.viewModel, { activeMenu: s10 } = this, r = { [i4.hasMultipleSources]: e9.length > 1, [i4.isLoading]: "loading" === t4, [i4.isSearching]: "searching" === t4, [i4.showWarning]: "warning" === s10, [i4.showSources]: "source" === s10, [i4.showSuggestions]: "suggestion" === s10 };
    return n2("div", { tabIndex: -1, afterCreate: (e10) => {
      this._container = e10, e10.addEventListener("focusout", this._removeActiveMenu);
    }, afterRemoved: (e10) => {
      e10.removeEventListener("focusout", this._removeActiveMenu);
    }, class: this.classes(r, i4.container), key: "base-container" }, this.renderSourceMenuButton(), this.renderSourcesMenu(), this.renderInputContainer(), this.renderSubmitButton(), this.renderWarningMenu());
  }
  renderClearButton() {
    return this.searchTerm ? n2("button", { bind: this, disabled: this.disabled, class: this.classes(i4.clearButton, i4.button), key: "esri-search__clear-button", onclick: this._handleClearButtonClick, onfocus: this._clearActiveMenu, title: this.messages.clearButtonTitle, type: "button" }, n2("span", { "aria-hidden": "true", class: i4.clearIcon })) : null;
  }
  renderLocationGroup() {
    const { messages: e9, locationEnabled: t4, displayedSearchTerm: s10 } = this, r = t4 && !s10, n11 = "suggestion" === this.activeMenu && 0 === this._activeMenuItemIndex;
    return r ? n2("ul", { role: "group", key: "esri-search__suggestion-list-current-location", class: this.classes(i4.menuList, i4.suggestionList, i4.suggestionListCurrentLocation) }, n2("li", { bind: this, "data-current-location-item": true, onclick: this._handleUseCurrentLocationClick, id: this._buildId("suggestion-item", 0), "aria-selected": ("suggestion" === this.activeMenu && 0 === this._activeMenuItemIndex).toString(), role: "option", class: this.classes(i4.menuItem, n11 ? i4.menuItemFocus : null) }, n2("span", { "aria-hidden": "true", class: i4.locate }), " ", e9.useCurrentLocation)) : null;
  }
  renderInput() {
    const { activeMenu: e9, locationEnabled: t4, displayedSearchTerm: s10, messages: r, suggestionsMenuId: n11, inputId: i9, _activeMenuItemIndex: o4, disabled: u4 } = this, { maxInputLength: l9, placeholder: a9, searchTerm: c7, suggestionCount: h8 } = this.viewModel, g5 = !(!(t4 && !s10) && !h8), m8 = "suggestion" === e9 && o4 > -1 ? this._buildId("suggestion-item", o4) : null;
    return n2("input", { "aria-activedescendant": m8, "aria-autocomplete": "list", "aria-expanded": (g5 && "suggestion" === e9).toString(), "aria-controls": g5 ? n11 : null, "aria-haspopup": "listbox", "aria-label": r.searchButtonTitle, bind: this, disabled: u4, placeholder: a9, maxlength: l9, autocomplete: "off", type: "text", class: this.classes(i4.esriInput, i4.input), value: c7, id: i9, role: "combobox", onkeyup: this._handleInputKeyup, onclick: this._openSuggestionMenu, oninput: this._handleInputPaste, onpaste: this._handleInputPaste, afterCreate: L, "data-node-ref": "_inputNode", onfocus: this.focus, onblur: this.blur, title: c7 ? "" : a9 });
  }
  renderForm() {
    return n2("form", { key: "esri-search__form", bind: this, disabled: this.disabled, class: i4.form, onsubmit: this._formSubmit, role: "search" }, this.renderInput());
  }
  renderSuggestList(e9) {
    const { sourceIndex: t4 } = e9, { results: s10 } = e9, r = s10 == null ? void 0 : s10.length;
    return r ? n2("ul", { role: "group", key: `esri-search__suggestion-list-${t4}`, class: this.classes(i4.menuList, i4.suggestionList) }, s10 == null ? void 0 : s10.map((e10) => this.renderSuggestion(e10, this._menuItemCount++))) : null;
  }
  renderSuggestionsGroup() {
    const { suggestions: e9 } = this.viewModel;
    return e9 ? e9.map((e10) => [this.renderSuggestionHeader(e10), this.renderSuggestList(e10)]) : [];
  }
  renderSuggestionsMenu() {
    const { displayedSearchTerm: e9, locationEnabled: t4, suggestionsMenuId: s10, inputId: r } = this, { suggestionCount: n11 } = this.viewModel, i9 = t4 && !e9 || n11;
    return this._menuItemCount = 0, i9 ? n2("div", { id: s10, key: "esri-search__suggestions-menu", class: this.classes(i4.menu, i4.suggestionsMenu), role: "listbox", "aria-labelledby": r, bind: this, afterCreate: L, "data-node-ref": "_suggestionListNode" }, this.renderLocationGroup(), this.renderSuggestionsGroup()) : null;
  }
  renderInputContainer() {
    return n2("div", { key: "esri-search__input-container", class: i4.inputContainer }, this.renderForm(), this.renderSuggestionsMenu(), this.renderClearButton());
  }
  renderSuggestionHeader(e9) {
    var _a;
    const { allSources: t4, activeSourceIndex: s10 } = this.viewModel, { sourceIndex: r } = e9, n11 = (_a = e9.results) == null ? void 0 : _a.length, i9 = t4.length > 1 && s10 === Y.ALL_INDEX;
    return n11 && i9 ? n2("div", { key: `esri-search__suggestion-header-${r}`, class: i4.menuHeader }, this._getSourceName(r)) : null;
  }
  renderSuggestion(e9, t4) {
    const { _activeMenuItemIndex: s10, viewModel: { searchTerm: r } } = this;
    if (!r)
      return;
    const n11 = "suggestion" === this.activeMenu && s10 === t4;
    return n2("li", { bind: this, id: this._buildId("suggestion-item", t4), "aria-selected": ("suggestion" === this.activeMenu && this._activeMenuItemIndex === t4).toString(), onclick: this._handleSuggestionClick, key: `esri-search__suggestion_${t4}`, "data-suggestion": e9, role: "option", innerHTML: this._getSuggestResultHTML(e9.text, r), class: this.classes(i4.menuItem, n11 ? i4.menuItemFocus : null) });
  }
  renderSource(e9) {
    const { activeSourceIndex: t4, searchAllEnabled: s10 } = this.viewModel, r = { [i4.menuItemActive]: e9 === t4, [i4.menuItemFocus]: "source" === this.activeMenu && e9 === (s10 ? this._activeMenuItemIndex - 1 : this._activeMenuItemIndex) }, n11 = s10 ? e9 + 1 : e9;
    return n2("li", { bind: this, key: `esri-search__source-${e9}`, id: this._buildId("source-item", n11), "aria-checked": (e9 === t4).toString(), onclick: this._handleSourceClick, "data-source-index": e9, role: "menuitemradio", class: this.classes(i4.source, i4.menuItem, r) }, this._getSourceName(e9));
  }
  renderNoResultsWarning(e9) {
    const { messages: t4 } = this, s10 = e9 ? s5(t4.noResultsFoundForValue, { value: `"${e9}"` }) : t4.noResultsFound;
    return n2("div", { key: "esri-search__no_results" }, n2("div", { class: i4.warningMenuHeader }, t4.noResults), n2("div", { class: i4.warningMenuText }, s10));
  }
  renderEmptySearchWarning() {
    const { messages: e9 } = this;
    return n2("div", { key: "esri-search__empty-search" }, n2("span", { "aria-hidden": "true", class: i4.noticeIcon }), n2("span", { class: i4.noValueText }, e9.emptyValue));
  }
  renderLocateWarning() {
    const { messages: e9 } = this;
    return n2("div", { key: "esri-search__locate-error" }, n2("span", { "aria-hidden": "true", class: i4.noticeIcon }), n2("span", { class: i4.noValueText }, e9.locateError));
  }
  renderWarning() {
    var _a;
    const { displayedSearchTerm: e9, _locateFailed: t4 } = this, { viewModel: s10 } = this;
    return t4 ? this.renderLocateWarning() : ((_a = s10.selectedSuggestion) == null ? void 0 : _a.location) || e9 ? this.renderNoResultsWarning(e9) : this.renderEmptySearchWarning();
  }
  _resetActiveMenuItemIndex() {
    this._activeMenuItemIndex = -1;
  }
  _buildId(e9, t4) {
    return `${this.id}-${e9}${void 0 === t4 ? "" : `-${t4}`}`;
  }
  _watchSourceChanges() {
    const { viewModel: { allSources: e9 } } = this, t4 = "sources";
    this.removeHandles(t4), e9.forEach((e10) => this.addHandles(l3(() => e10.name, () => this.scheduleRender()), t4));
  }
  _handleSourcesMenuToggleFocus() {
    "source" !== this.activeMenu && this._clearActiveMenu();
  }
  _handleSourcesMenuToggleClick() {
    var _a;
    const e9 = "source" === this.activeMenu;
    this.activeMenu = e9 ? "none" : "source", this.renderNow(), "source" === this.activeMenu && ((_a = this._sourceListNode) == null ? void 0 : _a.focus());
  }
  _handleClearButtonClick() {
    this.viewModel.clear(), this._focus();
  }
  _handleSearchButtonClick() {
    this.search();
  }
  _handleSuggestionClick(e9) {
    const t4 = f8(e9.currentTarget);
    t4 && (this._focus(), this.search(t4));
  }
  _handleUseCurrentLocationClick() {
    this._useCurrentLocation();
  }
  _useCurrentLocation() {
    this._focus("none"), this._cancelSuggest(), this._cancelSearch();
    const e9 = new AbortController(), { signal: t4 } = e9;
    this._searchController = e9;
    (async () => {
      try {
        const e10 = await this.viewModel.searchNearby({ signal: t4 });
        this.activeMenu = (e10 == null ? void 0 : e10.numResults) ? "none" : "warning";
      } catch (e10) {
        this._locateFailed = true, this.activeMenu = "warning";
      } finally {
        this._searchController = null;
      }
    })();
  }
  _handleSourceClick(e9) {
    this._setSourceFromMenuItem(e9.currentTarget);
  }
  _setSourceFromMenuItem(e9) {
    var _a;
    if (!e9)
      return;
    const t4 = C2(e9);
    null != t4 && (this.viewModel.activeSourceIndex = t4, this._clearActiveMenu(), (_a = this._sourceMenuButtonNode) == null ? void 0 : _a.focus());
  }
  _cancelSuggest() {
    this._suggestController = e2(this._suggestController);
  }
  _cancelSearch() {
    this._searchController = e2(this._searchController), this._locateFailed = false;
  }
  _handleInputKeyup(e9) {
    var _a;
    const s10 = i(e9);
    if (e9.ctrlKey || e9.metaKey || "Copy" === s10 || "ArrowLeft" === s10 || "ArrowRight" === s10 || "Shift" === s10)
      return;
    if ("Tab" === s10 || "Escape" === s10 || e9.shiftKey && "Tab" === s10)
      return this._cancelSuggest(), void ("Escape" === s10 && this._clearActiveMenu());
    const r = "Home" === s10 || "End" === s10 || "ArrowUp" === s10 || "ArrowDown" === s10;
    if ("Enter" === s10 && this._activeMenuItemIndex < 0)
      return void this._cancelSuggest();
    const n11 = (_a = this._suggestionListNode) == null ? void 0 : _a.getElementsByTagName("li");
    if (n11 == null ? void 0 : n11.length) {
      if ("suggestion" !== this.activeMenu && this._openSuggestionMenu(), r)
        return e9.preventDefault(), this._cancelSuggest(), void this._handleItemNavigation(s10, n11, this._suggestionListNode);
      const t4 = n11[this._activeMenuItemIndex];
      if ("Enter" === s10 && t4) {
        const e10 = f8(t4);
        return void (e10 ? (this._focus(), this.search(e10)) : x4(t4) && this._useCurrentLocation());
      }
    }
    this.viewModel.searchTerm && this.suggest();
  }
  _handleItemNavigation(e9, t4, s10) {
    const r = this._activeMenuItemIndex;
    "Home" === e9 && (this._activeMenuItemIndex = 0), "End" === e9 && (this._activeMenuItemIndex = t4.length - 1), "ArrowUp" === e9 && (this._activeMenuItemIndex = this._activeMenuItemIndex <= 0 ? t4.length - 1 : this._activeMenuItemIndex - 1), "ArrowDown" === e9 && (this._activeMenuItemIndex = this._activeMenuItemIndex === t4.length - 1 ? 0 : this._activeMenuItemIndex + 1), r !== this._activeMenuItemIndex && s10 && k(t4[this._activeMenuItemIndex], s10);
  }
  _scrollToTopSuggestion() {
    this._suggestionListNode && (this._suggestionListNode.scrollTop = 0);
  }
  _openSuggestionMenu() {
    this.activeMenu = "suggestion";
  }
  _handleInputPaste(e9) {
    const t4 = e9.target;
    this.viewModel.searchTerm !== t4.value && (this.viewModel.searchTerm = t4.value), this.viewModel.searchTerm && this.suggest();
  }
  _handleSourceMenuKeydown(e9) {
    var _a;
    const s10 = i(e9);
    if (T(s10)) {
      e9.preventDefault();
      const t4 = (_a = this._sourceListNode) == null ? void 0 : _a.getElementsByTagName("li"), s11 = t4 == null ? void 0 : t4[this._activeMenuItemIndex];
      this._setSourceFromMenuItem(s11);
    } else
      "ArrowUp" !== s10 && "ArrowDown" !== s10 && "End" !== s10 && "Home" !== s10 || e9.preventDefault();
  }
  _handleSourceMenuKeyup(e9) {
    var _a, _b, _c;
    const s10 = i(e9), r = "ArrowUp" === s10 || "ArrowDown" === s10 || "End" === s10 || "Home" === s10;
    if (r && e9.preventDefault(), "Escape" === s10)
      return this._clearActiveMenu(), void ((_a = this._sourceMenuButtonNode) == null ? void 0 : _a.focus());
    const n11 = (_b = this._sourceListNode) == null ? void 0 : _b.getElementsByTagName("li");
    return n11 && 0 !== n11.length && r ? ("source" !== this.activeMenu && (this.activeMenu = "source"), void this._handleItemNavigation(s10, n11, (_c = this._sourceListNode) == null ? void 0 : _c.parentElement)) : void 0;
  }
  _focus(e9) {
    this.focus(), e9 && (this.activeMenu = e9);
  }
  _formSubmit(e9) {
    e9.preventDefault(), -1 === this._activeMenuItemIndex && this.search();
  }
  _getSourceName(e9) {
    const { messages: t4 } = this, s10 = this.viewModel, { allSources: r } = s10, n11 = r.at(e9);
    return e9 === Y.ALL_INDEX ? t4.all : n11 && n11.name || t4.untitledSource;
  }
  _getSuggestResultHTML(e9, t4) {
    return e9 ? w3.test(e9) ? e9 : b2(e9, t4) : this.messages.untitledResult;
  }
  _renderSearchResultsContent() {
    return this._searchResultRenderer.showMoreResultsOpen = false, this._searchResultRenderer.viewModel = this.viewModel, this._searchResultRenderer;
  }
};
function f8(e9) {
  return e9 == null ? void 0 : e9["data-suggestion"];
}
function C2(e9) {
  return e9 == null ? void 0 : e9["data-source-index"];
}
function x4(e9) {
  return !!(e9 == null ? void 0 : e9["data-current-location-item"]);
}
e([y()], y5.prototype, "_activeMenuItemIndex", void 0), e([y()], y5.prototype, "displayedSearchTerm", null), e([y({ readOnly: true })], y5.prototype, "inputId", null), e([y({ readOnly: true })], y5.prototype, "suggestionsMenuId", null), e([y({ readOnly: true })], y5.prototype, "sourceMenuId", null), e([y({ readOnly: true })], y5.prototype, "sourceMenuButtonId", null), e([y()], y5.prototype, "activeMenu", void 0), e([y({ readOnly: true })], y5.prototype, "activeSource", null), e([y()], y5.prototype, "activeSourceIndex", null), e([y()], y5.prototype, "allPlaceholder", null), e([y({ readOnly: true })], y5.prototype, "allSources", null), e([y()], y5.prototype, "autoNavigate", null), e([y()], y5.prototype, "autoSelect", null), e([y({ readOnly: true })], y5.prototype, "defaultSources", null), e([y()], y5.prototype, "disabled", void 0), e([y()], y5.prototype, "goToOverride", null), e([y()], y5.prototype, "iconClass", void 0), e([y()], y5.prototype, "icon", void 0), e([y()], y5.prototype, "includeDefaultSources", null), e([y()], y5.prototype, "label", null), e([y()], y5.prototype, "locationEnabled", null), e([y()], y5.prototype, "maxResults", null), e([y()], y5.prototype, "maxSuggestions", null), e([y(), e3("esri/widgets/Search/t9n/Search")], y5.prototype, "messages", void 0), e([y(), e3("esri/t9n/common")], y5.prototype, "messagesCommon", void 0), e([y()], y5.prototype, "minSuggestCharacters", null), e([y()], y5.prototype, "popupEnabled", null), e([y()], y5.prototype, "popupTemplate", null), e([y()], y5.prototype, "portal", null), e([y()], y5.prototype, "resultGraphic", null), e([y()], y5.prototype, "resultGraphicEnabled", null), e([y({ readOnly: true })], y5.prototype, "results", null), e([y()], y5.prototype, "searchAllEnabled", null), e([y()], y5.prototype, "searchTerm", null), e([y({ readOnly: true })], y5.prototype, "selectedResult", null), e([y()], y5.prototype, "sources", null), e([y({ readOnly: true })], y5.prototype, "suggestions", null), e([y()], y5.prototype, "suggestionsEnabled", null), e([y()], y5.prototype, "view", null), e([e4(["search-complete", "search-clear", "search-start", "select-result", "suggest-start", "suggest-complete"]), y({ type: Y })], y5.prototype, "viewModel", void 0), y5 = e([a2("esri.widgets.Search")], y5);
var T3 = y5;
export {
  T3 as default
};
//# sourceMappingURL=@arcgis_core_widgets_Search__js.js.map

{
  "version": 3,
  "sources": ["../../@arcgis/core/views/3d/support/PBFDecoder.js", "../../@arcgis/core/views/3d/layers/support/featureTileQuery3D.js", "../../@arcgis/core/views/3d/layers/support/FeatureTileFetcher3DLayerViewContext.js", "../../@arcgis/core/views/layers/FeatureLayerView.js", "../../@arcgis/core/views/3d/layers/FeatureLayerViewBase3D.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport e from\"../../../Graphic.js\";import{NATIVE_ARRAY_MAX_SIZE as r}from\"../../../core/typedArrayUtil.js\";import{WorkerHandle as s}from\"../../../core/workers/WorkerHandle.js\";import t from\"../../../geometry/SpatialReference.js\";import o from\"../../../layers/support/Field.js\";class a{constructor(e){this._controller=e,this._handle=new i((r=>e.schedule(r)))}destroy(){this._handle.destroy()}invoke(r,s){return r.buffer&&0!==r.buffer.byteLength?(r.options.sourceSpatialReference&&r.options.sourceSpatialReference instanceof t&&(r.options={...r.options,sourceSpatialReference:r.options.sourceSpatialReference.toJSON()}),this._handle.invoke(r,s).then((r=>{let s=0,a=0;const i=async l=>{if(r.spatialReference=t.fromJSON(r.spatialReference),r.fields)for(;s<r.fields.length;)if(r.fields[s]=o.fromJSON(r.fields[s]),s++,l.madeProgress())return this._controller.reschedule((e=>i(e)));const c=r.spatialReference;for(;a<r.features.length;){const s=r.features[a];if(++a,s.uid=e.generateUID(),null!=s.geometry&&(s.geometry.spatialReference=c,n(s.geometry),l.madeProgress()))return this._controller.reschedule((e=>i(e)))}return r};return this._controller.schedule((e=>i(e)))}))):Promise.resolve(null)}}function n(e){switch(e.type){case\"polyline\":e.paths.reduce(((e,r)=>e+r.length),0)<r&&(e.paths=e.hasZ||e.hasM?e.paths.map((e=>e.map((e=>[e[0],e[1],e[2]])))):e.paths.map((e=>e.map((e=>[e[0],e[1]])))));break;case\"polygon\":e.rings.reduce(((e,r)=>e+r.length),0)<r&&(e.rings=e.hasZ||e.hasM?e.rings.map((e=>e.map((e=>[e[0],e[1],e[2]])))):e.rings.map((e=>e.map((e=>[e[0],e[1]])))))}}class i extends s{constructor(e){super(\"PBFDecoderWorker\",\"_parseFeatureQuery\",{_parseFeatureQuery:e=>[e.buffer]},e)}}export{a as PBFDecoder};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import r from\"../../../../core/Accessor.js\";import{destroyMaybe as t}from\"../../../../core/maybe.js\";import{throwIfAborted as s,createAbortError as o}from\"../../../../core/promiseUtils.js\";import{property as u}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/accessorSupport/ensureType.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/has.js\";import{subclass as a}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{fromFeatureSetJSON as y}from\"../../../../layers/graphics/dehydratedFeatures.js\";import{runQuery as i,executeQuery as n}from\"../../../../rest/query/operations/query.js\";import{PBFDecoder as l}from\"../../support/PBFDecoder.js\";let p=class extends r{constructor(e){super(e)}get queryFeaturesDehydrated(){const e=this.layer.capabilities,r=e&&e.query,t=r&&r.supportsFormatPBF,u=this.layer.parsedUrl;if(t){null==this._decoder&&(this._decoder=new l(this.controller));const e={sourceSpatialReference:this.layer.spatialReference?.toJSON()??null,applyTransform:!0,maxStringAttributeLength:1024};return(r,t)=>i(u,r,\"pbf\",this._createRequestOptions(t)).then((r=>(s(t),null!=this._decoder?this._decoder.invoke({buffer:r.data,options:e},t.signal):Promise.reject(o()))))}return(e,r)=>n(u,e,this.layer.spatialReference,this._createRequestOptions(r)).then((e=>y(e.data)))}queryFeatureCount(e,r){return this.layer.queryFeatureCount(e,r)}destroy(){this._decoder=t(this._decoder)}_createRequestOptions(e){return{...e,query:{...this.layer.customParameters,token:this.layer.apiKey,...e?.query}}}};e([u({constructOnly:!0})],p.prototype,\"layer\",void 0),e([u({constructOnly:!0})],p.prototype,\"controller\",void 0),e([u({readOnly:!0})],p.prototype,\"queryFeaturesDehydrated\",null),p=e([a(\"esri.views.3d.layers.support.featureTileQuery3D.FeatureTileServiceQuery3D\")],p);let c=class extends r{constructor(e){super(e)}queryFeaturesDehydrated(e,r){return this.layer.queryFeatures(e,r)}queryFeatureCount(e,r){return this.layer.queryFeatureCount(e,r)}};e([u({constructOnly:!0})],c.prototype,\"layer\",void 0),e([u({readOnly:!0})],c.prototype,\"queryFeaturesDehydrated\",null),c=e([a(\"esri.views.3d.layers.support.featureTileQuery3D.FeatureTileServiceMeshQuery3D\")],c);let d=class extends r{constructor(e){super(e)}queryFeaturesDehydrated(e,r){return this.layer.queryFeatures(e,r)}};e([u({constructOnly:!0})],d.prototype,\"layer\",void 0),d=e([a(\"esri.views.3d.layers.support.featureTileQuery3D.FeatureTileServiceQuery3D\")],d);let h=class extends r{constructor(e){super(e)}queryFeaturesDehydrated(e,r){return this.source.queryFeaturesJSON(e,r).then(y,(t=>{if(t&&\"query-features-json:unsupported\"===t.name)return this.layer.queryFeatures(e,r);throw t}))}queryFeatureCount(e,r){return this.layer.queryFeatureCount(e,r)}};function m(e,r){return\"feature\"===e.type&&\"feature-layer\"===e.source.type?null!=e.infoFor3D?new c({layer:e}):new p({layer:e,controller:r}):\"feature\"===e.type&&\"memory\"===e.source.type||\"csv\"===e.type||\"geojson\"===e.type||\"oriented-imagery\"===e.type||\"wfs\"===e.type?new h({layer:e,source:e.source}):\"ogc-feature\"===e.type?new d({layer:e}):null}e([u({constructOnly:!0})],h.prototype,\"layer\",void 0),e([u({constructOnly:!0})],h.prototype,\"source\",void 0),h=e([a(\"esri.views.3d.layers.support.featureTileQuery3D.FeatureTileClientQuery3D\")],h);export{m as createFeatureTileQuery3D};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{destroyMaybe as e}from\"../../../../core/maybe.js\";import{contextCapabilitiesFromLayer as r}from\"./FeatureTileFetcher3D.js\";import{createFeatureTileQuery3D as t}from\"./featureTileQuery3D.js\";class i{constructor(e){this._memoryCache=null,this._capabilities=null;const r=e.layerView.layer;this._layerView=e.layerView,this.objectIdField=r.objectIdField,this.globalIdField=\"globalIdField\"in r?r.globalIdField:null,this._returnZ=e.returnZ,this._returnM=e.returnM;const i=this._layerView.view.resourceController;this.query=t(r,i.normal),i&&this._memoryCacheEnabled&&(this._memoryCache=i.memoryController.newCache(`fl-${r.uid}`))}get _memoryCacheEnabled(){switch(this._layerView.layer.source.type){case\"feature-layer\":case\"ogc-feature\":case\"oriented-imagery\":return!0;case\"csv\":case\"geojson\":case\"memory\":case\"wfs\":return!1}}destroy(){this._memoryCache=e(this._memoryCache),this.query.destroy()}createQuery(){const e=this._layerView.layer.createQuery();return e.outFields=this._layerView.availableFields,e.returnZ=this._returnZ,e.returnM=this._returnM,e.outSpatialReference=this.tilingScheme.spatialReference,e}get memoryCache(){return this._memoryCache}get viewingMode(){return this._layerView.view.state.viewingMode}get tilingScheme(){return this._layerView.view.featureTiles.tilingScheme}get scheduler(){const e=this._layerView.view.resourceController;return e?e.scheduler:null}get geometryType(){return this._layerView.layer.geometryType}get fullExtent(){return this._layerView.layer.fullExtent}get tileMaxRecordCount(){return this._layerView.layer.capabilities.query.tileMaxRecordCount}get maxRecordCount(){return this._layerView.layer.capabilities.query.maxRecordCount}get capabilities(){return null!=this._capabilities||(this._capabilities=r(this._layerView.layer)),this._capabilities}logFetchError(e,r){e.error(\"#fetchTile()\",this._layerView.layer,r&&r.message?r.message:r)}}export{i as FeatureTileFetcher3DLayerViewContext};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import t from\"../../core/Error.js\";import r from\"../../core/Logger.js\";import{eachAlways as i}from\"../../core/promiseUtils.js\";import{watch as s,syncAndInitial as o,on as n}from\"../../core/reactiveUtils.js\";import{property as l}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/accessorSupport/ensureType.js\";import\"../../core/arrayUtils.js\";import\"../../core/has.js\";import{subclass as a}from\"../../core/accessorSupport/decorators/subclass.js\";import{combinedViewLayerTimeExtentProperty as u}from\"../../layers/support/commonProperties.js\";import p from\"../../layers/support/FeatureEffect.js\";import d from\"../../layers/support/FeatureFilter.js\";import{fixFields as f,unpackFieldNames as c,collectLabelingFields as m,collectElevationFields as y,collectFilterFields as h,collectFeatureReductionFields as F,collectOrderByInfos as g,collectFields as w,collectField as E,featureHasFields as b}from\"../../layers/support/fieldUtils.js\";import{getFloorFilterClause as x}from\"../../layers/support/floorFilterUtils.js\";import I from\"../../rest/support/Query.js\";import{loadArcade as v}from\"../../support/arcadeOnDemand.js\";import{getFetchPopupTemplate as R,getRequiredFields as j}from\"./support/popupUtils.js\";const q=\"esri.views.layers.FeatureLayerView\",P=r.getLogger(q),_=r=>{let _=class extends r{constructor(...e){super(...e),this._updatingRequiredFieldsPromise=null,this.filter=null,this.timeExtent=null,this.layer=null,this.requiredFields=[],this.view=null}initialize(){this.handles.add([s((()=>{const e=this.layer;return[e?.elevationInfo?.featureExpressionInfo,e&&\"displayField\"in e?e.displayField:null,e&&\"timeInfo\"in e&&e.timeInfo,e&&\"renderer\"in e&&e.renderer,e&&\"labelingInfo\"in e&&e.labelingInfo,e&&\"floorInfo\"in e&&e.floorInfo,this.filter,this.featureEffect,this.timeExtent]}),(()=>this._handleRequiredFieldsChange()),o),n((()=>this.view?.floors),\"change\",(()=>this._handleRequiredFieldsChange())),n((()=>{const e=this.layer;return e&&\"sublayers\"in e?e.sublayers:null}),\"change\",(()=>this._handleRequiredFieldsChange()))])}get availableFields(){const{layer:e,layer:{fieldsIndex:t},requiredFields:r}=this;return\"outFields\"in e&&e.outFields?f(t,[...c(t,e.outFields),...r]):f(t,r)}get featureEffect(){return this.layer&&\"featureEffect\"in this.layer?this.layer.featureEffect:null}set featureEffect(e){this._override(\"featureEffect\",e)}get maximumNumberOfFeatures(){return 0}set maximumNumberOfFeatures(e){P.error(\"#maximumNumberOfFeatures=\",\"Setting maximum number of features is not supported\")}get maximumNumberOfFeaturesExceeded(){return!1}highlight(e){throw new Error(\"missing implementation\")}createQuery(){const e={outFields:[\"*\"],returnGeometry:!0,outSpatialReference:this.view.spatialReference},t=null!=this.filter?this.filter.createQuery(e):new I(e);if(\"feature\"===this.layer.type){const e=x(this);null!=e&&(t.where=t.where?`(${t.where}) AND (${e})`:e)}return null!=this.timeExtent&&(t.timeExtent=null!=t.timeExtent?t.timeExtent.intersection(this.timeExtent):this.timeExtent.clone()),t}createAggregateQuery(){const e={outFields:[\"*\"],returnGeometry:!0,outSpatialReference:this.view.spatialReference};return new I(e)}queryFeatures(e,t){throw new Error(\"missing implementation\")}queryObjectIds(e,t){throw new Error(\"missing implementation\")}queryFeatureCount(e,t){throw new Error(\"missing implementation\")}queryExtent(e,t){throw new Error(\"missing implementation\")}async fetchPopupFeatures(e,t){const r=this.validateFetchPopupFeatures(t);if(r)throw r;return this.fetchClientPopupFeatures(t)}_loadArcadeModules(e){return e.get(\"expressionInfos.length\")||Array.isArray(e.content)&&e.content.some((e=>\"expression\"===e.type))?v():Promise.resolve()}_handleRequiredFieldsChange(){const e=this._updateRequiredFields();this._set(\"_updatingRequiredFieldsPromise\",e),e.then((()=>{this._updatingRequiredFieldsPromise===e&&this._set(\"_updatingRequiredFieldsPromise\",null)}))}async _updateRequiredFields(){if(!this.layer||!this.view)return;const e=\"3d\"===this.view.type,{layer:t,layer:{fieldsIndex:r,objectIdField:s}}=this,o=\"renderer\"in t&&t.renderer,n=\"orderBy\"in t&&t.orderBy,l=\"featureReduction\"in t?t.featureReduction:null,a=new Set,u=await i([o?o.collectRequiredFields(a,r):null,m(a,t),e?y(a,t):null,null!=this.filter?h(a,t,this.filter):null,null!=this.featureEffect?h(a,t,this.featureEffect.filter):null,l?F(a,t,l):null,n?g(a,t,n):null]);if(\"timeInfo\"in t&&t.timeInfo&&this.timeExtent&&w(a,t.fieldsIndex,[t.timeInfo.startField,t.timeInfo.endField]),\"feature\"===t.type&&(t.floorInfo&&w(a,t.fieldsIndex,[t.floorInfo.floorField]),e&&null!=t.infoFor3D&&(null==t.globalIdField&&P.error(\"globalIdField missing on 3DObjectFeatureLayer\"),w(a,t.fieldsIndex,[t.globalIdField]))),\"subtype-group\"===t.type){E(a,r,t.subtypeField);const e=t.sublayers.map((e=>Promise.all([e.renderer?.collectRequiredFields(a,r),m(a,e)])));await i(e)}for(const i of u)i.error&&P.error(i.error);E(a,r,s),e&&\"displayField\"in t&&t.displayField&&E(a,r,t.displayField);const p=Array.from(a).sort();this._set(\"requiredFields\",p)}validateFetchPopupFeatures(e){if(null==e)return null;for(const r of e.clientGraphics??[]){const i=r.layer;if(\"popupEnabled\"in i&&!i.popupEnabled)return new t(\"featurelayerview:fetchPopupFeatures\",\"Popups are disabled\",{layer:i});if(r.isAggregate){const e=\"featureReduction\"in i?i.featureReduction:null;if(!(e&&\"popupTemplate\"in e&&e.popupEnabled&&e.popupTemplate))return new t(\"featurelayerview:fetchPopupFeatures\",\"Popups are disabled\",{layer:i})}else if(\"popupTemplate\"in i){if(!R(i,e))return new t(\"featurelayerview:fetchPopupFeatures\",\"Layer does not define a popup template\",{layer:i})}}}async fetchClientPopupFeatures(e){const t=null!=e?e.clientGraphics:null;if(!t||0===t.length)return[];const r=new Array(t.length),i=new Map,s=await this.createPopupQuery(e);for(let o=0;o<t.length;o++){const n=t[o];if(n.isAggregate){r[o]=n;continue}const l=n.layer;if(!(\"popupEnabled\"in l))continue;const a=c(this.layer.fieldsIndex,s.outFields),u=R(l,e);if(null==u)continue;const p=await this._loadArcadeModules(u);p&&p.arcadeUtils.hasGeometryOperations(u)||!b(a,n)?i.set(n.getObjectId(),{graphic:n,index:o}):r[o]=n}if(\"stream\"===this.layer.type||0===i.size)return r.filter(Boolean);s.objectIds=Array.from(i.keys());try{const e=await this.layer.queryFeatures(s);for(const t of e.features){const{graphic:{geometry:e},index:s}=i.get(t.getObjectId());t.geometry||=e,r[s]=t}}catch{}return r.filter(Boolean)}async createPopupQuery(e){const t=this.layer.createQuery(),r=new Set;let i=!1;const s=null!=e&&e.clientGraphics?e.clientGraphics.map((e=>e.layer)):[this.layer];for(const o of s){if(!(\"popupEnabled\"in o))continue;const t=R(o,e);if(null==t)continue;const s=await this._loadArcadeModules(t),n=s&&s.arcadeUtils.hasGeometryOperations(t);i=!(\"point\"!==this.layer.geometryType&&!n);const l=await j(this.layer,t);for(const e of l)r.add(e)}if(t.returnGeometry=i,t.returnZ=i,t.returnM=i,t.outFields=Array.from(r),t.outSpatialReference=this.view.spatialReference,\"feature\"===this.layer.type){const e=x(this);null!=e&&(t.where=t.where?`(${t.where}) AND (${e})`:e)}return t}canResume(){return!!super.canResume()&&(null==this.timeExtent||!this.timeExtent.isEmpty)}};return e([l()],_.prototype,\"_updatingRequiredFieldsPromise\",void 0),e([l({readOnly:!0})],_.prototype,\"availableFields\",null),e([l({type:p})],_.prototype,\"featureEffect\",null),e([l({type:d})],_.prototype,\"filter\",void 0),e([l(u)],_.prototype,\"timeExtent\",void 0),e([l()],_.prototype,\"layer\",void 0),e([l({type:Number})],_.prototype,\"maximumNumberOfFeatures\",null),e([l({readOnly:!0,type:Boolean})],_.prototype,\"maximumNumberOfFeaturesExceeded\",null),e([l({readOnly:!0})],_.prototype,\"requiredFields\",void 0),e([l()],_.prototype,\"suspended\",void 0),e([l()],_.prototype,\"view\",void 0),_=e([a(q)],_),_};export{_ as default};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import r from\"../../../core/Error.js\";import{destroyMaybe as t}from\"../../../core/maybe.js\";import{watch as s,initial as o,when as i,syncAndInitial as a}from\"../../../core/reactiveUtils.js\";import{property as l}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/has.js\";import{subclass as n}from\"../../../core/accessorSupport/decorators/subclass.js\";import{hydrateGeometry as u}from\"../../../layers/graphics/hydratedFeatures.js\";import{FeatureTileController3D as p}from\"../../../layers/graphics/controllers/FeatureTileController3D.js\";import{FeatureLikeLayerView3D as c}from\"./FeatureLikeLayerView3D.js\";import{LayerView3D as m}from\"./LayerView3D.js\";import{FeatureTileFetcher3DLayerViewContext as h}from\"./support/FeatureTileFetcher3DLayerViewContext.js\";import{EventedSet as d}from\"../support/EventedSet.js\";import{updatingProgress as y}from\"../support/updatingProperties.js\";import{UpdatePolicy as f}from\"../webgl-engine/lib/UpdatePolicy.js\";import g from\"../../layers/FeatureLayerView.js\";import F from\"../../layers/LayerView.js\";import x from\"../../layers/RefreshableLayerView.js\";let b=class extends(x(c(g(m(F))))){constructor(e){super(e),this._controllerTotal=0,this._processorTotal=0,this.suspendResumeExtentMode=\"data\"}initialize(){this.handles.add(s((()=>this._updatingRequiredFieldsPromise),(e=>this.updatingHandles.addPromise(e)),a))}destroy(){this.updatingHandles.removeAll(),this.handles.removeAll(),this._fetcherContext=t(this._fetcherContext)}get maximumNumberOfFeatures(){return this.controller?.maximumNumberOfFeatures??this._get(\"maximumNumberOfFeatures\")}set maximumNumberOfFeatures(e){this._set(\"maximumNumberOfFeatures\",e),this.controller&&(this.controller.maximumNumberOfFeatures=e)}get maximumNumberOfFeaturesExceeded(){return!!this.controller&&!(this.suspended||!this.controller.maximumNumberOfFeaturesExceeded)}get updatingProgressValue(){let e=0;if(this.controller?.updating){const r=this.controller.updatingRemaining,t=Math.max(this.controller.updatingTotal,this._controllerTotal);t>0&&(e=(t-r)/t,this._controllerTotal=t)}let r=0;if(this.processor?.updating){const e=this.processor.updatingRemaining,t=Math.max(e,this._processorTotal);t>0&&(r=(t-e)/t,this._processorTotal=t)}return.5*(e+r)}get updatePolicy(){if(!this.controller)return f.ASYNC;switch(this.controller.mode){case\"snapshot\":{const e=M.get(this.layer.geometryType);return null==e||this.controller.serviceDataCount>e?f.ASYNC:f.SYNC}case\"tiles\":return f.ASYNC}}get hasZ(){const e=this.layer,r=e.capabilities&&e.capabilities.data;return!(!r||!r.supportsZ)&&(\"returnZ\"in e&&null!=e.returnZ?e.returnZ:r.supportsZ)}get hasM(){const e=this.layer,r=e.capabilities&&e.capabilities.data;return!(!r||!r.supportsM)&&(\"returnM\"in e&&null!=e.returnM&&e.returnM)}setVisibility(e,r){this.processor?.setObjectIdVisibility(e,r)}createQuery(){return super.createQuery()}queryFeatures(e,r){const t=()=>super.queryFeatures(e,r);return\"mesh\"===this.layer.geometryType?this._queryFeaturesMesh(this._ensureQuery(e),t):t()}beforeSetController(e){e.maximumNumberOfFeatures=this.maximumNumberOfFeatures}createController(){this._fetcherContext=new h({layerView:this,returnZ:this.hasZ,returnM:this.hasM});const e=new p({layerView:this,context:this._fetcherContext,graphics:new d,extent:this.clippingExtent});return this.updatingHandles.add((()=>e.serviceDataExtent),(e=>{this.processor&&(this.processor.dataExtent=e)}),o),this.handles.add(s((()=>this.suspended),(r=>{r?e.suspend():e.resume()}),a)),this.updatingHandles.add((()=>this.processor?.displayFeatureLimit),(r=>e.displayFeatureLimit=r),o),this.handles.add(i((()=>!this.updating),(()=>{this._controllerTotal=0,this._processorTotal=0}))),e}async doRefresh(e){e&&!this.suspended&&this.controller&&this.controller.refetch(),this.processor.refreshFilter()}get usedMemory(){return(this.processor?.usedMemory??0)+(this.controller?.memoryForUnusedFeatures??0)}get unloadedMemory(){const e=this.processor?.unprocessedMemoryEstimate??0,r=this.controller?.expectedFeatureDiff??0,t=this.processor?.loadedFeatures??0,s=t/(t+r);return e+r*(this.processor?.usedMemoryPerFeature??0)*s}get ignoresMemoryFactor(){return this.controller?.hasMaximumNumberOfFeaturesOverride}async _queryFeaturesMesh(e,r){await this._validateQueryFeaturesMesh(e);const t=await r();if(e&&e.outStatistics||null==this.graphics3DProcessor)return t;const s=this.layer.objectIdField,o=this.graphics3DProcessor.graphics3DGraphicsByObjectID,i=[];for(const a of t.features)if(a.geometry){const e=o.get(a.attributes[s]);e&&(a.geometry=u(e.graphic.geometry),i.push(a))}else i.push(a);return t.features=i,t}async _validateQueryFeaturesMesh(e){if(!e)return;const t=e=>{throw new r(\"feature-layer-view:unsupported-query\",`Queries on Mesh feature collection layers do not support '${e}'`)},s=[\"quantizationParameters\",\"geometryPrecision\",\"maxAllowableOffset\"];for(const r of s)null!=e[r]&&t(r);\"returnM\"in e&&e.returnM&&t(\"returnM\"),\"returnCentroid\"in e&&e.returnCentroid&&t(\"returnCentroid\"),null==e.outSpatialReference||e.outSpatialReference.equals(this.view.spatialReference)||t(\"outSpatialReference\")}get performanceInfo(){const e=this.controller?.displayFeatureLimit,r=null!=e?e.averageSymbolComplexity:void 0,t=null!=r?`f:${r.primitivesPerFeature},v:${r.primitivesPerCoordinate}`:\"n/a\";return{...this._getResourceInfo(),partial:this.maximumNumberOfFeaturesExceeded,mode:this.controller?.mode??\"n/a\",symbolComplexity:t,nodes:this.controller?.tileDescriptors.length??0,...this.controller?.debug??{storedFeatures:0,totalVertices:0}}}get test(){return{updatePolicy:this.updatePolicy,controller:this.controller,loadedGraphics:this.controller?.graphics}}};e([l()],b.prototype,\"layer\",void 0),e([l()],b.prototype,\"controller\",void 0),e([l()],b.prototype,\"_controllerTotal\",void 0),e([l()],b.prototype,\"_processorTotal\",void 0),e([l()],b.prototype,\"maximumNumberOfFeatures\",null),e([l()],b.prototype,\"maximumNumberOfFeaturesExceeded\",null),e([l(y)],b.prototype,\"updatingProgress\",void 0),e([l({readOnly:!0})],b.prototype,\"updatingProgressValue\",null),e([l({readOnly:!0})],b.prototype,\"updatePolicy\",null),e([l({readOnly:!0})],b.prototype,\"hasZ\",null),e([l({readOnly:!0})],b.prototype,\"hasM\",null),e([l()],b.prototype,\"suspendResumeExtentMode\",void 0),b=e([n(\"esri.views.3d.layers.FeatureLayerViewBase3D\")],b);const M=new Map([[\"point\",5e3],[\"polygon\",500],[\"polyline\",1e3]]),_=b;export{_ as default};\n"],
  "mappings": "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",
  "names": ["a", "e", "i", "r", "s", "l", "y", "c", "h", "n", "p", "e", "r", "t", "u", "a", "s", "m", "c", "d", "h", "i", "e", "r", "m", "A", "q", "r", "_", "e", "l", "a", "t", "b", "s", "o", "n", "u", "i", "p", "w", "d", "b", "a", "n", "d", "e", "l", "r", "t", "i", "I", "f", "s", "o", "_"]
}

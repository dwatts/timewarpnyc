import {
  o as o2,
  s as s2
} from "./chunk-7EG7BYWF.js";
import {
  e
} from "./chunk-DOQ3SAAR.js";
import {
  a,
  i,
  l,
  o as o3,
  r
} from "./chunk-Y2CLYMXQ.js";
import {
  s3 as s
} from "./chunk-HMVAPW5X.js";
import {
  o
} from "./chunk-IYZKKFJM.js";

// node_modules/@arcgis/core/chunks/mat4f32.js
function e2() {
  const e6 = new Float32Array(16);
  return e6[0] = 1, e6[5] = 1, e6[10] = 1, e6[15] = 1, e6;
}
function r2(e6) {
  const r4 = new Float32Array(16);
  return r4[0] = e6[0], r4[1] = e6[1], r4[2] = e6[2], r4[3] = e6[3], r4[4] = e6[4], r4[5] = e6[5], r4[6] = e6[6], r4[7] = e6[7], r4[8] = e6[8], r4[9] = e6[9], r4[10] = e6[10], r4[11] = e6[11], r4[12] = e6[12], r4[13] = e6[13], r4[14] = e6[14], r4[15] = e6[15], r4;
}
function t(e6, r4, t2, n4, o7, a5, c4, u3, l4, s4, f3, i3, y3, w2, b2, A2) {
  const F2 = new Float32Array(16);
  return F2[0] = e6, F2[1] = r4, F2[2] = t2, F2[3] = n4, F2[4] = o7, F2[5] = a5, F2[6] = c4, F2[7] = u3, F2[8] = l4, F2[9] = s4, F2[10] = f3, F2[11] = i3, F2[12] = y3, F2[13] = w2, F2[14] = b2, F2[15] = A2, F2;
}
function n(e6, r4) {
  return new Float32Array(e6, r4, 16);
}
var o4 = e2();
var a2 = Object.freeze(Object.defineProperty({ __proto__: null, IDENTITY: o4, clone: r2, create: e2, createView: n, fromValues: t }, Symbol.toStringTag, { value: "Module" }));

// node_modules/@arcgis/core/layers/effects/colorMatrixFunctions.js
var r3 = (r4, s4) => {
  const o7 = s2(r4, s4, 0, 0, 0, 0, s4, 0, 0, 0, 0, s4, 0, 0, 0, 0, 1);
  return o2(o7, o7);
};
var s3 = (r4, s4) => {
  const o7 = s2(r4, s4, 0, 0, 0.5 - 0.5 * s4, 0, s4, 0, 0.5 - 0.5 * s4, 0, 0, s4, 0.5 - 0.5 * s4, 0, 0, 0, 1);
  return o2(o7, o7);
};
var o5 = (r4, s4) => {
  const o7 = 1 - s4, c4 = s2(r4, 0.2126 + 0.7874 * o7, 0.7152 - 0.7152 * o7, 0.0722 - 0.0722 * o7, 0, 0.2126 - 0.2126 * o7, 0.7152 + 0.2848 * o7, 0.0722 - 0.0722 * o7, 0, 0.2126 - 0.2126 * o7, 0.7152 - 0.7152 * o7, 0.0722 + 0.9278 * o7, 0, 0, 0, 0, 1);
  return o2(c4, c4);
};
var c = (r4, s4) => {
  const o7 = Math.sin(s4 * Math.PI / 180), c4 = Math.cos(s4 * Math.PI / 180), e6 = s2(r4, 0.213 + 0.787 * c4 - 0.213 * o7, 0.715 - 0.715 * c4 - 0.715 * o7, 0.072 - 0.072 * c4 + 0.928 * o7, 0, 0.213 - 0.213 * c4 + 0.143 * o7, 0.715 + 0.285 * c4 + 0.14 * o7, 0.072 - 0.072 * c4 - 0.283 * o7, 0, 0.213 - 0.213 * c4 - 0.787 * o7, 0.715 - 0.715 * c4 + 0.715 * o7, 0.072 + 0.928 * c4 + 0.072 * o7, 0, 0, 0, 0, 1);
  return o2(e6, e6);
};
var e3 = (r4, s4) => {
  const o7 = 1 - 2 * s4, c4 = s2(r4, o7, 0, 0, s4, 0, o7, 0, s4, 0, 0, o7, s4, 0, 0, 0, 1);
  return o2(c4, c4);
};
var u = (r4, s4) => {
  const o7 = s2(r4, 0.213 + 0.787 * s4, 0.715 - 0.715 * s4, 0.072 - 0.072 * s4, 0, 0.213 - 0.213 * s4, 0.715 + 0.285 * s4, 0.072 - 0.072 * s4, 0, 0.213 - 0.213 * s4, 0.715 - 0.715 * s4, 0.072 + 0.928 * s4, 0, 0, 0, 0, 1);
  return o2(o7, o7);
};
var a3 = (r4, s4) => {
  const o7 = 1 - s4, c4 = s2(r4, 0.393 + 0.607 * o7, 0.769 - 0.769 * o7, 0.189 - 0.189 * o7, 0, 0.349 - 0.349 * o7, 0.686 + 0.314 * o7, 0.168 - 0.168 * o7, 0, 0.272 - 0.272 * o7, 0.534 - 0.534 * o7, 0.131 + 0.869 * o7, 0, 0, 0, 0, 1);
  return o2(c4, c4);
};

// node_modules/@arcgis/core/layers/effects/effects.js
var c2 = class _c {
  constructor(t2, s4, r4) {
    this.strength = t2, this.radius = s4, this.threshold = r4, this.type = "bloom";
  }
  interpolate(t2, s4, r4) {
    this.strength = M(t2.strength, s4.strength, r4), this.radius = M(t2.radius, s4.radius, r4), this.threshold = M(t2.threshold, s4.threshold, r4);
  }
  clone() {
    return new _c(this.strength, this.radius, this.threshold);
  }
  toJSON() {
    return { type: "bloom", radius: y(this.radius), strength: this.strength, threshold: this.threshold };
  }
};
var l2 = class _l {
  constructor(t2) {
    this.radius = t2, this.type = "blur";
  }
  interpolate(t2, s4, r4) {
    this.radius = Math.round(M(t2.radius, s4.radius, r4));
  }
  clone() {
    return new _l(this.radius);
  }
  toJSON() {
    return { type: "blur", radius: y(this.radius) };
  }
};
var p = class _p {
  constructor(t2, s4) {
    this.type = t2, this.amount = s4, "invert" !== this.type && "grayscale" !== this.type && "sepia" !== this.type || (this.amount = Math.min(this.amount, 1));
  }
  get colorMatrix() {
    return this._colorMatrix || this._updateMatrix(), this._colorMatrix;
  }
  interpolate(t2, s4, r4) {
    this.amount = M(t2.amount, s4.amount, r4), this._updateMatrix();
  }
  clone() {
    return new _p(this.type, this.amount);
  }
  toJSON() {
    return { type: this.type, amount: this.amount };
  }
  _updateMatrix() {
    const t2 = this._colorMatrix || e2();
    switch (this.type) {
      case "brightness":
        this._colorMatrix = r3(t2, this.amount);
        break;
      case "contrast":
        this._colorMatrix = s3(t2, this.amount);
        break;
      case "grayscale":
        this._colorMatrix = o5(t2, this.amount);
        break;
      case "invert":
        this._colorMatrix = e3(t2, this.amount);
        break;
      case "saturate":
        this._colorMatrix = u(t2, this.amount);
        break;
      case "sepia":
        this._colorMatrix = a3(t2, this.amount);
    }
  }
};
var d = class _d {
  constructor(t2, s4, r4, o7) {
    this.offsetX = t2, this.offsetY = s4, this.blurRadius = r4, this.color = o7, this.type = "drop-shadow";
  }
  interpolate(t2, s4, r4) {
    this.offsetX = M(t2.offsetX, s4.offsetX, r4), this.offsetY = M(t2.offsetY, s4.offsetY, r4), this.blurRadius = M(t2.blurRadius, s4.blurRadius, r4), this.color[0] = Math.round(M(t2.color[0], s4.color[0], r4)), this.color[1] = Math.round(M(t2.color[1], s4.color[1], r4)), this.color[2] = Math.round(M(t2.color[2], s4.color[2], r4)), this.color[3] = M(t2.color[3], s4.color[3], r4);
  }
  clone() {
    return new _d(this.offsetX, this.offsetY, this.blurRadius, [...this.color]);
  }
  toJSON() {
    const t2 = [...this.color];
    return t2[3] *= 255, { type: "drop-shadow", xoffset: y(this.offsetX), yoffset: y(this.offsetY), blurRadius: y(this.blurRadius), color: t2 };
  }
};
var m = class _m {
  constructor(t2) {
    this.angle = t2, this.type = "hue-rotate";
  }
  get colorMatrix() {
    return this._colorMatrix || this._updateMatrix(), this._colorMatrix;
  }
  interpolate(t2, s4, r4) {
    this.angle = M(t2.angle, s4.angle, r4), this._updateMatrix();
  }
  clone() {
    return new _m(this.angle);
  }
  toJSON() {
    return { type: "hue-rotate", angle: this.angle };
  }
  _updateMatrix() {
    const t2 = this._colorMatrix || e2();
    this._colorMatrix = c(t2, this.angle);
  }
};
var f = class _f {
  constructor(t2) {
    this.amount = t2, this.type = "opacity", this.amount = Math.min(this.amount, 1);
  }
  interpolate(t2, s4, r4) {
    this.amount = M(t2.amount, s4.amount, r4);
  }
  clone() {
    return new _f(this.amount);
  }
  toJSON() {
    return { type: "opacity", amount: this.amount };
  }
};
function M(t2, s4, r4) {
  return t2 + (s4 - t2) * r4;
}
function y(t2) {
  return Math.round(1e3 * e(t2)) / 1e3;
}
function x(s4) {
  switch (s4.type) {
    case "grayscale":
    case "sepia":
    case "invert":
      return new p(s4.type, 0);
    case "saturate":
    case "brightness":
    case "contrast":
      return new p(s4.type, 1);
    case "opacity":
      return new f(1);
    case "hue-rotate":
      return new m(0);
    case "blur":
      return new l2(0);
    case "drop-shadow":
      return new d(0, 0, 0, [...l("transparent")]);
    case "bloom":
      return new c2(0, 0, 1);
  }
}

// node_modules/@arcgis/core/layers/effects/utils.js
function n2(t2, n4) {
  const e6 = t2.length > n4.length ? t2 : n4;
  return (t2.length > n4.length ? n4 : t2).every((t3, n5) => t3.type === e6[n5].type);
}
function e4(n4, e6) {
  const h2 = n4.length > e6.length ? n4 : e6, l4 = n4.length > e6.length ? e6 : n4;
  for (let g2 = l4.length; g2 < h2.length; g2++)
    l4.push(x(h2[g2]));
}
function h(t2) {
  const n4 = t2[0];
  return !!n4 && "type" in n4;
}

// node_modules/@arcgis/core/layers/effects/parser.js
var m2;
var g;
var v = { exports: {} };
v.exports, g = function() {
  function t2(t3, e7) {
    function r5() {
      this.constructor = t3;
    }
    r5.prototype = e7.prototype, t3.prototype = new r5();
  }
  function e6(t3, r5, n5, u3) {
    var a5 = Error.call(this, t3);
    return Object.setPrototypeOf && Object.setPrototypeOf(a5, e6.prototype), a5.expected = r5, a5.found = n5, a5.location = u3, a5.name = "SyntaxError", a5;
  }
  function r4(t3, e7, r5) {
    return r5 = r5 || " ", t3.length > e7 ? t3 : (e7 -= t3.length, t3 + (r5 += r5.repeat(e7)).slice(0, e7));
  }
  function n4(t3, r5) {
    var n5, u3 = {}, a5 = (r5 = void 0 !== r5 ? r5 : {}).grammarSource, o7 = { start: Lt }, c4 = Lt, i3 = "none", s4 = ")", f3 = ",", l4 = "(", p2 = "%", h2 = "px", m3 = "cm", g2 = "mm", v2 = "in", d3 = "pt", y3 = "pc", A2 = "deg", w2 = "rad", x3 = "grad", b2 = "turn", C2 = "#", F2 = ".", E2 = "e", j2 = /^[ \t\n\r]/, $2 = /^[a-z\-]/, O2 = /^[0-9a-fA-F]/, k2 = /^[+\-]/, q2 = /^[0-9]/, S2 = Bt("none"), z2 = Ut("none", false), R2 = Ut(")", false), I2 = Ut(",", false), M3 = Bt("whitespace"), P2 = Ht([" ", "	", "\n", "\r"], false, false), N2 = Bt("function"), T2 = Ut("(", false), U2 = Bt("identifier"), H2 = Ht([["a", "z"], "-"], false, false), _2 = Bt("percentage"), B2 = Ut("%", false), D2 = Bt("length"), G2 = Ut("px", false), J = Ut("cm", false), K = Ut("mm", false), L = Ut("in", false), Q = Ut("pt", false), V = Ut("pc", false), W = Bt("angle"), X = Ut("deg", false), Y = Ut("rad", false), Z = Ut("grad", false), tt = Ut("turn", false), et = Bt("number"), rt = Bt("color"), nt = Ut("#", false), ut = Ht([["0", "9"], ["a", "f"], ["A", "F"]], false, false), at = Ht(["+", "-"], false, false), ot = Ht([["0", "9"]], false, false), ct = Ut(".", false), it = Ut("e", false), st = function() {
      return [];
    }, ft = function(t4, e7) {
      return { type: "function", name: t4, parameters: e7 || [] };
    }, lt = function(t4, e7) {
      return e7.length > 0 ? se(t4, e7, 3) : [t4];
    }, pt = function(t4) {
      return { type: "quantity", value: t4.value, unit: t4.unit };
    }, ht = function(t4) {
      return { type: "color", colorType: t4.type, value: t4.value };
    }, mt = function(t4) {
      return t4;
    }, gt = function() {
      return Tt();
    }, vt = function(t4) {
      return { value: t4, unit: "%" };
    }, dt = function(t4) {
      return { value: t4, unit: "px" };
    }, yt = function(t4) {
      return { value: t4, unit: "cm" };
    }, At = function(t4) {
      return { value: t4, unit: "mm" };
    }, wt = function(t4) {
      return { value: t4, unit: "in" };
    }, xt = function(t4) {
      return { value: t4, unit: "pt" };
    }, bt = function(t4) {
      return { value: t4, unit: "pc" };
    }, Ct = function(t4) {
      return { value: t4, unit: "deg" };
    }, Ft = function(t4) {
      return { value: t4, unit: "rad" };
    }, Et = function(t4) {
      return { value: t4, unit: "grad" };
    }, jt = function(t4) {
      return { value: t4, unit: "turn" };
    }, $t = function(t4) {
      return { value: t4, unit: null };
    }, Ot = function() {
      return { type: "hex", value: Tt() };
    }, kt = function(t4) {
      return { type: "function", value: t4 };
    }, qt = function() {
      return { type: "named", value: Tt() };
    }, St = function() {
      return parseFloat(Tt());
    }, zt = 0, Rt = 0, It = [{ line: 1, column: 1 }], Mt = 0, Pt = [], Nt = 0;
    if ("startRule" in r5) {
      if (!(r5.startRule in o7))
        throw new Error(`Can't start parsing from rule "` + r5.startRule + '".');
      c4 = o7[r5.startRule];
    }
    function Tt() {
      return t3.substring(Rt, zt);
    }
    function Ut(t4, e7) {
      return { type: "literal", text: t4, ignoreCase: e7 };
    }
    function Ht(t4, e7, r6) {
      return { type: "class", parts: t4, inverted: e7, ignoreCase: r6 };
    }
    function _t() {
      return { type: "end" };
    }
    function Bt(t4) {
      return { type: "other", description: t4 };
    }
    function Dt(e7) {
      var r6, n6 = It[e7];
      if (n6)
        return n6;
      for (r6 = e7 - 1; !It[r6]; )
        r6--;
      for (n6 = { line: (n6 = It[r6]).line, column: n6.column }; r6 < e7; )
        10 === t3.charCodeAt(r6) ? (n6.line++, n6.column = 1) : n6.column++, r6++;
      return It[e7] = n6, n6;
    }
    function Gt(t4, e7, r6) {
      var n6 = Dt(t4), u4 = Dt(e7), o8 = { source: a5, start: { offset: t4, line: n6.line, column: n6.column }, end: { offset: e7, line: u4.line, column: u4.column } };
      return r6 && a5 && "function" == typeof a5.offset && (o8.start = a5.offset(o8.start), o8.end = a5.offset(o8.end)), o8;
    }
    function Jt(t4) {
      zt < Mt || (zt > Mt && (Mt = zt, Pt = []), Pt.push(t4));
    }
    function Kt(t4, r6, n6) {
      return new e6(e6.buildMessage(t4, r6), t4, r6, n6);
    }
    function Lt() {
      var t4;
      return (t4 = Qt()) === u3 && (t4 = Vt()), t4;
    }
    function Qt() {
      var e7, r6;
      return Nt++, e7 = zt, Zt(), t3.substr(zt, 4) === i3 ? (r6 = i3, zt += 4) : (r6 = u3, 0 === Nt && Jt(z2)), r6 !== u3 ? (Zt(), Rt = e7, e7 = st()) : (zt = e7, e7 = u3), Nt--, e7 === u3 && 0 === Nt && Jt(S2), e7;
    }
    function Vt() {
      var t4, e7;
      if (t4 = [], (e7 = Wt()) !== u3)
        for (; e7 !== u3; )
          t4.push(e7), e7 = Wt();
      else
        t4 = u3;
      return t4;
    }
    function Wt() {
      var e7, r6, n6, a6;
      return e7 = zt, Zt(), (r6 = te()) !== u3 ? (Zt(), (n6 = Xt()) === u3 && (n6 = null), Zt(), 41 === t3.charCodeAt(zt) ? (a6 = s4, zt++) : (a6 = u3, 0 === Nt && Jt(R2)), a6 !== u3 ? (Zt(), Rt = e7, e7 = ft(r6, n6)) : (zt = e7, e7 = u3)) : (zt = e7, e7 = u3), e7;
    }
    function Xt() {
      var e7, r6, n6, a6, o8, c5, i4, s5;
      if (e7 = zt, (r6 = Yt()) !== u3) {
        for (n6 = [], a6 = zt, o8 = Zt(), 44 === t3.charCodeAt(zt) ? (c5 = f3, zt++) : (c5 = u3, 0 === Nt && Jt(I2)), c5 === u3 && (c5 = null), i4 = Zt(), (s5 = Yt()) !== u3 ? a6 = o8 = [o8, c5, i4, s5] : (zt = a6, a6 = u3); a6 !== u3; )
          n6.push(a6), a6 = zt, o8 = Zt(), 44 === t3.charCodeAt(zt) ? (c5 = f3, zt++) : (c5 = u3, 0 === Nt && Jt(I2)), c5 === u3 && (c5 = null), i4 = Zt(), (s5 = Yt()) !== u3 ? a6 = o8 = [o8, c5, i4, s5] : (zt = a6, a6 = u3);
        Rt = e7, e7 = lt(r6, n6);
      } else
        zt = e7, e7 = u3;
      return e7;
    }
    function Yt() {
      var t4, e7;
      return t4 = zt, (e7 = re()) === u3 && (e7 = ne()) === u3 && (e7 = ue()) === u3 && (e7 = ae()), e7 !== u3 && (Rt = t4, e7 = pt(e7)), (t4 = e7) === u3 && (t4 = zt, (e7 = oe()) !== u3 && (Rt = t4, e7 = ht(e7)), t4 = e7), t4;
    }
    function Zt() {
      var e7, r6;
      for (Nt++, e7 = [], j2.test(t3.charAt(zt)) ? (r6 = t3.charAt(zt), zt++) : (r6 = u3, 0 === Nt && Jt(P2)); r6 !== u3; )
        e7.push(r6), j2.test(t3.charAt(zt)) ? (r6 = t3.charAt(zt), zt++) : (r6 = u3, 0 === Nt && Jt(P2));
      return Nt--, r6 = u3, 0 === Nt && Jt(M3), e7;
    }
    function te() {
      var e7, r6, n6;
      return Nt++, e7 = zt, (r6 = ee()) !== u3 ? (40 === t3.charCodeAt(zt) ? (n6 = l4, zt++) : (n6 = u3, 0 === Nt && Jt(T2)), n6 !== u3 ? (Rt = e7, e7 = mt(r6)) : (zt = e7, e7 = u3)) : (zt = e7, e7 = u3), Nt--, e7 === u3 && (r6 = u3, 0 === Nt && Jt(N2)), e7;
    }
    function ee() {
      var e7, r6, n6;
      if (Nt++, e7 = zt, r6 = [], $2.test(t3.charAt(zt)) ? (n6 = t3.charAt(zt), zt++) : (n6 = u3, 0 === Nt && Jt(H2)), n6 !== u3)
        for (; n6 !== u3; )
          r6.push(n6), $2.test(t3.charAt(zt)) ? (n6 = t3.charAt(zt), zt++) : (n6 = u3, 0 === Nt && Jt(H2));
      else
        r6 = u3;
      return r6 !== u3 && (Rt = e7, r6 = gt()), Nt--, (e7 = r6) === u3 && (r6 = u3, 0 === Nt && Jt(U2)), e7;
    }
    function re() {
      var e7, r6, n6;
      return Nt++, e7 = zt, Zt(), (r6 = ce()) !== u3 ? (37 === t3.charCodeAt(zt) ? (n6 = p2, zt++) : (n6 = u3, 0 === Nt && Jt(B2)), n6 !== u3 ? (Rt = e7, e7 = vt(r6)) : (zt = e7, e7 = u3)) : (zt = e7, e7 = u3), Nt--, e7 === u3 && 0 === Nt && Jt(_2), e7;
    }
    function ne() {
      var e7, r6, n6;
      return Nt++, e7 = zt, Zt(), (r6 = ce()) !== u3 ? (t3.substr(zt, 2) === h2 ? (n6 = h2, zt += 2) : (n6 = u3, 0 === Nt && Jt(G2)), n6 !== u3 ? (Rt = e7, e7 = dt(r6)) : (zt = e7, e7 = u3)) : (zt = e7, e7 = u3), e7 === u3 && (e7 = zt, Zt(), (r6 = ce()) !== u3 ? (t3.substr(zt, 2) === m3 ? (n6 = m3, zt += 2) : (n6 = u3, 0 === Nt && Jt(J)), n6 !== u3 ? (Rt = e7, e7 = yt(r6)) : (zt = e7, e7 = u3)) : (zt = e7, e7 = u3), e7 === u3 && (e7 = zt, Zt(), (r6 = ce()) !== u3 ? (t3.substr(zt, 2) === g2 ? (n6 = g2, zt += 2) : (n6 = u3, 0 === Nt && Jt(K)), n6 !== u3 ? (Rt = e7, e7 = At(r6)) : (zt = e7, e7 = u3)) : (zt = e7, e7 = u3), e7 === u3 && (e7 = zt, Zt(), (r6 = ce()) !== u3 ? (t3.substr(zt, 2) === v2 ? (n6 = v2, zt += 2) : (n6 = u3, 0 === Nt && Jt(L)), n6 !== u3 ? (Rt = e7, e7 = wt(r6)) : (zt = e7, e7 = u3)) : (zt = e7, e7 = u3), e7 === u3 && (e7 = zt, Zt(), (r6 = ce()) !== u3 ? (t3.substr(zt, 2) === d3 ? (n6 = d3, zt += 2) : (n6 = u3, 0 === Nt && Jt(Q)), n6 !== u3 ? (Rt = e7, e7 = xt(r6)) : (zt = e7, e7 = u3)) : (zt = e7, e7 = u3), e7 === u3 && (e7 = zt, Zt(), (r6 = ce()) !== u3 ? (t3.substr(zt, 2) === y3 ? (n6 = y3, zt += 2) : (n6 = u3, 0 === Nt && Jt(V)), n6 !== u3 ? (Rt = e7, e7 = bt(r6)) : (zt = e7, e7 = u3)) : (zt = e7, e7 = u3)))))), Nt--, e7 === u3 && 0 === Nt && Jt(D2), e7;
    }
    function ue() {
      var e7, r6, n6;
      return Nt++, e7 = zt, (r6 = ce()) !== u3 ? (t3.substr(zt, 3) === A2 ? (n6 = A2, zt += 3) : (n6 = u3, 0 === Nt && Jt(X)), n6 !== u3 ? (Rt = e7, e7 = Ct(r6)) : (zt = e7, e7 = u3)) : (zt = e7, e7 = u3), e7 === u3 && (e7 = zt, (r6 = ce()) !== u3 ? (t3.substr(zt, 3) === w2 ? (n6 = w2, zt += 3) : (n6 = u3, 0 === Nt && Jt(Y)), n6 !== u3 ? (Rt = e7, e7 = Ft(r6)) : (zt = e7, e7 = u3)) : (zt = e7, e7 = u3), e7 === u3 && (e7 = zt, (r6 = ce()) !== u3 ? (t3.substr(zt, 4) === x3 ? (n6 = x3, zt += 4) : (n6 = u3, 0 === Nt && Jt(Z)), n6 !== u3 ? (Rt = e7, e7 = Et(r6)) : (zt = e7, e7 = u3)) : (zt = e7, e7 = u3), e7 === u3 && (e7 = zt, (r6 = ce()) !== u3 ? (t3.substr(zt, 4) === b2 ? (n6 = b2, zt += 4) : (n6 = u3, 0 === Nt && Jt(tt)), n6 !== u3 ? (Rt = e7, e7 = jt(r6)) : (zt = e7, e7 = u3)) : (zt = e7, e7 = u3)))), Nt--, e7 === u3 && (r6 = u3, 0 === Nt && Jt(W)), e7;
    }
    function ae() {
      var t4, e7;
      return Nt++, t4 = zt, Zt(), (e7 = ce()) !== u3 ? (Rt = t4, t4 = $t(e7)) : (zt = t4, t4 = u3), Nt--, t4 === u3 && 0 === Nt && Jt(et), t4;
    }
    function oe() {
      var e7, r6, n6, a6;
      if (Nt++, e7 = zt, 35 === t3.charCodeAt(zt) ? (r6 = C2, zt++) : (r6 = u3, 0 === Nt && Jt(nt)), r6 !== u3) {
        if (n6 = [], O2.test(t3.charAt(zt)) ? (a6 = t3.charAt(zt), zt++) : (a6 = u3, 0 === Nt && Jt(ut)), a6 !== u3)
          for (; a6 !== u3; )
            n6.push(a6), O2.test(t3.charAt(zt)) ? (a6 = t3.charAt(zt), zt++) : (a6 = u3, 0 === Nt && Jt(ut));
        else
          n6 = u3;
        n6 !== u3 ? (Rt = e7, e7 = Ot()) : (zt = e7, e7 = u3);
      } else
        zt = e7, e7 = u3;
      return e7 === u3 && (e7 = zt, (r6 = Wt()) !== u3 && (Rt = e7, r6 = kt(r6)), (e7 = r6) === u3 && (e7 = zt, (r6 = ee()) !== u3 && (Rt = e7, r6 = qt()), e7 = r6)), Nt--, e7 === u3 && (r6 = u3, 0 === Nt && Jt(rt)), e7;
    }
    function ce() {
      var e7, r6, n6, a6, o8, c5, i4;
      for (e7 = zt, k2.test(t3.charAt(zt)) ? (t3.charAt(zt), zt++) : 0 === Nt && Jt(at), r6 = zt, n6 = [], q2.test(t3.charAt(zt)) ? (a6 = t3.charAt(zt), zt++) : (a6 = u3, 0 === Nt && Jt(ot)); a6 !== u3; )
        n6.push(a6), q2.test(t3.charAt(zt)) ? (a6 = t3.charAt(zt), zt++) : (a6 = u3, 0 === Nt && Jt(ot));
      if (46 === t3.charCodeAt(zt) ? (a6 = F2, zt++) : (a6 = u3, 0 === Nt && Jt(ct)), a6 !== u3) {
        if (o8 = [], q2.test(t3.charAt(zt)) ? (c5 = t3.charAt(zt), zt++) : (c5 = u3, 0 === Nt && Jt(ot)), c5 !== u3)
          for (; c5 !== u3; )
            o8.push(c5), q2.test(t3.charAt(zt)) ? (c5 = t3.charAt(zt), zt++) : (c5 = u3, 0 === Nt && Jt(ot));
        else
          o8 = u3;
        o8 !== u3 ? r6 = n6 = [n6, a6, o8] : (zt = r6, r6 = u3);
      } else
        zt = r6, r6 = u3;
      if (r6 === u3)
        if (r6 = [], q2.test(t3.charAt(zt)) ? (n6 = t3.charAt(zt), zt++) : (n6 = u3, 0 === Nt && Jt(ot)), n6 !== u3)
          for (; n6 !== u3; )
            r6.push(n6), q2.test(t3.charAt(zt)) ? (n6 = t3.charAt(zt), zt++) : (n6 = u3, 0 === Nt && Jt(ot));
        else
          r6 = u3;
      if (r6 !== u3) {
        if (n6 = zt, 101 === t3.charCodeAt(zt) ? (a6 = E2, zt++) : (a6 = u3, 0 === Nt && Jt(it)), a6 !== u3) {
          if (k2.test(t3.charAt(zt)) ? (o8 = t3.charAt(zt), zt++) : (o8 = u3, 0 === Nt && Jt(at)), o8 === u3 && (o8 = null), c5 = [], q2.test(t3.charAt(zt)) ? (i4 = t3.charAt(zt), zt++) : (i4 = u3, 0 === Nt && Jt(ot)), i4 !== u3)
            for (; i4 !== u3; )
              c5.push(i4), q2.test(t3.charAt(zt)) ? (i4 = t3.charAt(zt), zt++) : (i4 = u3, 0 === Nt && Jt(ot));
          else
            c5 = u3;
          c5 !== u3 ? n6 = a6 = [a6, o8, c5] : (zt = n6, n6 = u3);
        } else
          zt = n6, n6 = u3;
        n6 === u3 && (n6 = null), Rt = e7, e7 = St();
      } else
        zt = e7, e7 = u3;
      return e7;
    }
    function ie(t4, e7) {
      return t4.map(function(t5) {
        return t5[e7];
      });
    }
    function se(t4, e7, r6) {
      return [t4].concat(ie(e7, r6));
    }
    if ((n5 = c4()) !== u3 && zt === t3.length)
      return n5;
    throw n5 !== u3 && zt < t3.length && Jt(_t()), Kt(Pt, Mt < t3.length ? t3.charAt(Mt) : null, Mt < t3.length ? Gt(Mt, Mt + 1) : Gt(Mt, Mt));
  }
  return t2(e6, Error), e6.prototype.format = function(t3) {
    var e7 = "Error: " + this.message;
    if (this.location) {
      var n5, u3 = null;
      for (n5 = 0; n5 < t3.length; n5++)
        if (t3[n5].source === this.location.source) {
          u3 = t3[n5].text.split(/\r\n|\n|\r/g);
          break;
        }
      var a5 = this.location.start, o7 = this.location.source && "function" == typeof this.location.source.offset ? this.location.source.offset(a5) : a5, c4 = this.location.source + ":" + o7.line + ":" + o7.column;
      if (u3) {
        var i3 = this.location.end, s4 = r4("", o7.line.toString().length, " "), f3 = u3[a5.line - 1], l4 = (a5.line === i3.line ? i3.column : f3.length + 1) - a5.column || 1;
        e7 += "\n --> " + c4 + "\n" + s4 + " |\n" + o7.line + " | " + f3 + "\n" + s4 + " | " + r4("", a5.column - 1, " ") + r4("", l4, "^");
      } else
        e7 += "\n at " + c4;
    }
    return e7;
  }, e6.buildMessage = function(t3, e7) {
    var r5 = { literal: function(t4) {
      return '"' + u3(t4.text) + '"';
    }, class: function(t4) {
      var e8 = t4.parts.map(function(t5) {
        return Array.isArray(t5) ? a5(t5[0]) + "-" + a5(t5[1]) : a5(t5);
      });
      return "[" + (t4.inverted ? "^" : "") + e8.join("") + "]";
    }, any: function() {
      return "any character";
    }, end: function() {
      return "end of input";
    }, other: function(t4) {
      return t4.description;
    } };
    function n5(t4) {
      return t4.charCodeAt(0).toString(16).toUpperCase();
    }
    function u3(t4) {
      return t4.replace(/\\/g, "\\\\").replace(/"/g, '\\"').replace(/\0/g, "\\0").replace(/\t/g, "\\t").replace(/\n/g, "\\n").replace(/\r/g, "\\r").replace(/[\x00-\x0F]/g, function(t5) {
        return "\\x0" + n5(t5);
      }).replace(/[\x10-\x1F\x7F-\x9F]/g, function(t5) {
        return "\\x" + n5(t5);
      });
    }
    function a5(t4) {
      return t4.replace(/\\/g, "\\\\").replace(/\]/g, "\\]").replace(/\^/g, "\\^").replace(/-/g, "\\-").replace(/\0/g, "\\0").replace(/\t/g, "\\t").replace(/\n/g, "\\n").replace(/\r/g, "\\r").replace(/[\x00-\x0F]/g, function(t5) {
        return "\\x0" + n5(t5);
      }).replace(/[\x10-\x1F\x7F-\x9F]/g, function(t5) {
        return "\\x" + n5(t5);
      });
    }
    function o7(t4) {
      return r5[t4.type](t4);
    }
    function c4(t4) {
      var e8, r6, n6 = t4.map(o7);
      if (n6.sort(), n6.length > 0) {
        for (e8 = 1, r6 = 1; e8 < n6.length; e8++)
          n6[e8 - 1] !== n6[e8] && (n6[r6] = n6[e8], r6++);
        n6.length = r6;
      }
      switch (n6.length) {
        case 1:
          return n6[0];
        case 2:
          return n6[0] + " or " + n6[1];
        default:
          return n6.slice(0, -1).join(", ") + ", or " + n6[n6.length - 1];
      }
    }
    function i3(t4) {
      return t4 ? '"' + u3(t4) + '"' : "end of input";
    }
    return "Expected " + c4(t3) + " but " + i3(e7) + " found.";
  }, { SyntaxError: e6, parse: n4 };
}, (m2 = v).exports && (m2.exports = g());
var d2 = v.exports;
function y2(t2) {
  if (!t2 || 0 === t2.length)
    return null;
  if ("string" == typeof t2) {
    const e7 = A(t2);
    return e7 && 0 !== e7.length ? e7 : null;
  }
  const e6 = t2.map((t3) => {
    if (!Number.isFinite(t3.scale) || t3.scale <= 0)
      throw new s("effect:invalid-scale", "scale must be finite and greater than 0", { stop: t3 });
    return { scale: t3.scale, effects: A(t3.value) };
  });
  e6.sort((t3, e7) => e7.effects.length - t3.effects.length);
  for (let r4 = 0; r4 < e6.length - 1; r4++) {
    if (!n2(e6[r4].effects, e6[r4 + 1].effects))
      throw new s("effect:interpolation-impossible", "Cannot interpolate by scale between 2 lists of mixed effects", { a: e6[r4].effects, b: e6[r4 + 1].effects });
    e4(e6[r4].effects, e6[r4 + 1].effects);
  }
  return e6.sort((t3, e7) => e7.scale - t3.scale), e6;
}
function A(t2) {
  let e6;
  if (!t2)
    return [];
  try {
    e6 = d2.parse(t2);
  } catch (r4) {
    throw new s("effect:invalid-syntax", "Invalid effect syntax", { value: t2, error: r4 });
  }
  return e6.map((t3) => w(t3));
}
function w(t2) {
  try {
    switch (t2.name) {
      case "grayscale":
      case "sepia":
      case "saturate":
      case "invert":
      case "brightness":
      case "contrast":
        return x2(t2);
      case "opacity":
        return b(t2);
      case "hue-rotate":
        return C(t2);
      case "blur":
        return F(t2);
      case "drop-shadow":
        return E(t2);
      case "bloom":
        return j(t2);
    }
  } catch (e6) {
    throw e6.details.filter = t2, e6;
  }
  throw new s("effect:unknown-effect", `Effect '${t2.name}' is not supported`, { effect: t2 });
}
function x2(t2) {
  let e6 = 1;
  return $(t2.parameters, 1), 1 === t2.parameters.length && (e6 = P(t2.parameters[0])), new p(t2.name, e6);
}
function b(t2) {
  let e6 = 1;
  return $(t2.parameters, 1), 1 === t2.parameters.length && (e6 = P(t2.parameters[0])), new f(e6);
}
function C(t2) {
  let e6 = 0;
  return $(t2.parameters, 1), 1 === t2.parameters.length && (e6 = T(t2.parameters[0])), new m(e6);
}
function F(t2) {
  let e6 = 0;
  return $(t2.parameters, 1), 1 === t2.parameters.length && (e6 = U(t2.parameters[0]), k(e6, t2.parameters[0])), new l2(e6);
}
function E(t2) {
  const e6 = [];
  let r4 = null;
  for (const n4 of t2.parameters)
    if ("color" === n4.type) {
      if (e6.length && Object.freeze(e6), r4)
        throw new s("effect:type-error", "Accepts only one color", {});
      r4 = H(n4);
    } else {
      const t3 = U(n4);
      if (Object.isFrozen(e6))
        throw new s("effect:type-error", "<length> parameters not consecutive", { lengths: e6 });
      e6.push(t3), 3 === e6.length && k(t3, n4);
    }
  if (e6.length < 2 || e6.length > 3)
    throw new s("effect:type-error", `Expected <length>{2,3}, Actual: <length>{${e6.length}}`, { lengths: e6 });
  return new d(e6[0], e6[1], e6[2] || 0, r4 || _("black"));
}
function j(t2) {
  let e6 = 1, r4 = 0, n4 = 0;
  return $(t2.parameters, 3), t2.parameters[0] && (e6 = P(t2.parameters[0])), t2.parameters[1] && (r4 = U(t2.parameters[1]), k(r4, t2.parameters[1])), t2.parameters[2] && (n4 = P(t2.parameters[2])), new c2(e6, r4, n4);
}
function $(t2, e6) {
  if (t2.length > e6)
    throw new s("effect:type-error", `Function supports up to ${e6} parameters, Actual: ${t2.length}`, { parameters: t2 });
}
function O(t2) {
  if ("color" === t2.type)
    return "<color>";
  if (t2.unit) {
    if (t2.unit in I)
      return "<length>";
    if (t2.unit in z)
      return "<angle>";
    if ("%" === t2.unit)
      return "<percentage>";
  }
  return "<double>";
}
function k(t2, e6) {
  if (t2 < 0)
    throw new s("effect:type-error", `Negative values are not allowed, Actual: ${t2}`, { term: e6 });
}
function q(t2) {
  if ("quantity" !== t2.type || null !== t2.unit)
    throw new s("effect:type-error", `Expected <double>, Actual: ${O(t2)}`, { term: t2 });
}
function S(t2) {
  if ("quantity" !== t2.type || null !== t2.unit && "%" !== t2.unit)
    throw new s("effect:type-error", `Expected <double> or <percentage>, Actual: ${O(t2)}`, { term: t2 });
}
var z = { deg: 1, grad: 0.9, rad: 180 / Math.PI, turn: 360 };
function R(t2) {
  if ("quantity" !== t2.type || !(0 === t2.value && null === t2.unit || t2.unit && null != z[t2.unit]))
    throw new s("effect:type-error", `Expected <angle>, Actual: ${O(t2)}`, { term: t2 });
}
var I = { px: 1, cm: 96 / 2.54, mm: 96 / 2.54 / 10, in: 96, pc: 16, pt: 96 / 72 };
function M2(t2) {
  if ("quantity" !== t2.type || !(0 === t2.value && null === t2.unit || t2.unit && null != I[t2.unit]))
    throw new s("effect:type-error", `Expected <length>, Actual: ${O(t2)}`, { term: t2 });
}
function P(t2) {
  S(t2);
  const e6 = t2.value;
  return k(e6, t2), "%" === t2.unit ? 0.01 * e6 : e6;
}
function N(t2) {
  return q(t2), k(t2.value, t2), t2.value;
}
function T(t2) {
  return R(t2), t2.value * z[t2.unit] || 0;
}
function U(t2) {
  return M2(t2), t2.value * I[t2.unit] || 0;
}
function H(e6) {
  switch (e6.colorType) {
    case "hex":
      return i(e6.value);
    case "named":
      return _(e6.value);
    case "function":
      return G(e6.value);
  }
}
function _(t2) {
  if (!r(t2))
    throw new s("effect:unknown-color", `color '${t2}' isn't valid`, { namedColor: t2 });
  return a(t2);
}
var B = /^rgba?/i;
var D = /^hsla?/i;
function G(t2) {
  if ($(t2.parameters, 4), B.test(t2.name))
    return [P(t2.parameters[0]), P(t2.parameters[1]), P(t2.parameters[2]), t2.parameters[3] ? P(t2.parameters[3]) : 1];
  if (D.test(t2.name))
    return o3(N(t2.parameters[0]), P(t2.parameters[1]), P(t2.parameters[2]), t2.parameters[3] ? P(t2.parameters[3]) : 1);
  throw new s("effect:syntax-error", `Invalid color function '${t2.name}'`, { colorFunction: t2 });
}

// node_modules/@arcgis/core/layers/effects/jsonUtils.js
function n3(e6, t2, r4) {
  var _a;
  try {
    return c3(e6);
  } catch (s4) {
    (_a = r4 == null ? void 0 : r4.messages) == null ? void 0 : _a.push(s4);
  }
  return null;
}
function a4(e6, r4, s4, n4) {
  try {
    const n5 = o6(e6);
    o(s4, n5, r4);
  } catch (a5) {
    n4.messages && n4.messages.push(a5);
  }
}
function o6(e6) {
  const t2 = y2(e6);
  return t2 ? h(t2) ? t2.map((e7) => e7.toJSON()) : t2.map(({ scale: e7, effects: t3 }) => ({ scale: e7, value: t3.map((e8) => e8.toJSON()) })) : null;
}
function c3(e6) {
  if (!e6 || 0 === e6.length)
    return null;
  if (f2(e6)) {
    const t2 = [];
    for (const r4 of e6)
      t2.push({ scale: r4.scale, value: i2(r4.value) });
    return t2;
  }
  return i2(e6);
}
function f2(e6) {
  const t2 = e6[0];
  return !!t2 && "scale" in t2;
}
function i2(e6) {
  if (!e6 || !e6.length)
    return "";
  const t2 = [];
  for (const s4 of e6) {
    let e7 = [];
    switch (s4.type) {
      case "grayscale":
      case "sepia":
      case "saturate":
      case "invert":
      case "brightness":
      case "contrast":
      case "opacity":
        e7 = [u2(s4, "amount")];
        break;
      case "blur":
        e7 = [u2(s4, "radius", "pt")];
        break;
      case "hue-rotate":
        e7 = [u2(s4, "angle", "deg")];
        break;
      case "drop-shadow":
        e7 = [u2(s4, "xoffset", "pt"), u2(s4, "yoffset", "pt"), u2(s4, "blurRadius", "pt"), l3(s4, "color")];
        break;
      case "bloom":
        e7 = [u2(s4, "strength"), u2(s4, "radius", "pt"), u2(s4, "threshold")];
    }
    const n4 = `${s4.type}(${e7.filter(Boolean).join(" ")})`;
    y2(n4), t2.push(n4);
  }
  return t2.join(" ");
}
function u2(t2, r4, s4) {
  if (null == t2[r4])
    throw new s("effect:missing-parameter", `Missing parameter '${r4}' in ${t2.type} effect`, { effect: t2 });
  return s4 ? t2[r4] + s4 : "" + t2[r4];
}
function l3(t2, r4) {
  if (null == t2[r4])
    throw new s("effect:missing-parameter", `Missing parameter '${r4}' in ${t2.type} effect`, { effect: t2 });
  const s4 = t2[r4];
  return `rgba(${s4[0] || 0}, ${s4[1] || 0}, ${s4[2] || 0}, ${s4[3] / 255 || 0})`;
}

export {
  n3 as n,
  a4 as a,
  i2 as i
};
//# sourceMappingURL=chunk-ZUBHLDU6.js.map

{
  "version": 3,
  "sources": ["../../@arcgis/core/views/layers/WMSLayerView.js", "../../@arcgis/core/views/3d/layers/WMSLayerView3D.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import r from\"../../core/Error.js\";import{destroyMaybe as t}from\"../../core/maybe.js\";import{property as o}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/accessorSupport/ensureType.js\";import\"../../core/arrayUtils.js\";import\"../../core/has.js\";import{subclass as s}from\"../../core/accessorSupport/decorators/subclass.js\";import{combinedViewLayerTimeExtentProperty as p}from\"../../layers/support/commonProperties.js\";import{ExportWMSImageParameters as a}from\"../../layers/support/ExportWMSImageParameters.js\";const i=i=>{let m=class extends i{initialize(){this.exportImageParameters=new a({layer:this.layer})}destroy(){this.exportImageParameters=t(this.exportImageParameters)}get exportImageVersion(){return this.exportImageParameters?.commitProperty(\"version\"),this.commitProperty(\"timeExtent\"),(this._get(\"exportImageVersion\")||0)+1}fetchPopupFeatures(e){const{layer:t}=this;if(!e)return Promise.reject(new r(\"wmslayerview:fetchPopupFeatures\",\"Nothing to fetch without area\",{layer:t}));const{popupEnabled:o}=t;if(!o)return Promise.reject(new r(\"wmslayerview:fetchPopupFeatures\",\"popupEnabled should be true\",{popupEnabled:o}));const s=this.createFetchPopupFeaturesQuery(e);if(!s)return Promise.resolve([]);const{extent:p,width:a,height:i,x:m,y:n}=s;if(!(p&&a&&i))throw new r(\"wmslayerview:fetchPopupFeatures\",\"WMSLayer does not support fetching features.\",{extent:p,width:a,height:i});return t.fetchFeatureInfo(p,a,i,m,n)}};return e([o()],m.prototype,\"exportImageParameters\",void 0),e([o({readOnly:!0})],m.prototype,\"exportImageVersion\",null),e([o()],m.prototype,\"layer\",void 0),e([o(p)],m.prototype,\"timeExtent\",void 0),m=e([s(\"esri.layers.mixins.WMSLayerView\")],m),m};export{i as default};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../core/Error.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/has.js\";import{subclass as r}from\"../../../core/accessorSupport/decorators/subclass.js\";import s from\"../../../geometry/Extent.js\";import i from\"./DynamicLayerView3D.js\";import o from\"../../layers/WMSLayerView.js\";let a=class extends(o(i)){constructor(){super(...arguments),this.type=\"wms-3d\"}initialize(){this.layer.serviceSupportsSpatialReference(this.view.spatialReference)||this.addResolvingPromise(Promise.reject(new t(\"layerview:spatial-reference-incompatible\",\"The spatial references supported by this WMS layer are incompatible with the spatial reference of the view\"))),this.updatingHandles.add((()=>this.exportImageParameters?.version),(()=>{this.updatingHandles.addPromise(this.refreshDebounced())}))}createFetchPopupFeaturesQuery(e){const t=this.findExtentInfoAt(e),r=t.extent,i=new s(r[0],r[1],r[2],r[3],this._spatialReference),o=t.imageSize,a=o.width,n=o.height,p=i.width/a;return{extent:i,width:a,height:n,x:Math.round((e.x-i.xmin)/p),y:Math.round((i.ymax-e.y)/p)}}getFetchOptions(){return{timeExtent:this.timeExtent}}};a=e([r(\"esri.views.3d.layers.WMSLayerView3D\")],a);const n=a;export{n as default};\n"],
  "mappings": "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",
  "names": ["i", "l", "e", "s", "a", "m", "n", "a", "e", "i", "n"]
}

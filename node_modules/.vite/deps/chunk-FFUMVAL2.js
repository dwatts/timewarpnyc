import {
  e2 as e,
  f,
  h as h2,
  i as i2,
  l,
  s,
  y
} from "./chunk-3JQ6N63Z.js";
import {
  t as t2
} from "./chunk-U3J7253Q.js";
import {
  t
} from "./chunk-FWH3QSBQ.js";
import {
  e as e2
} from "./chunk-2UENN434.js";
import {
  C,
  a2 as a,
  c2 as c,
  i,
  p
} from "./chunk-UYRCWUYQ.js";
import {
  h,
  j
} from "./chunk-IYZKKFJM.js";

// node_modules/@arcgis/core/core/PerformanceSampler.js
var s2 = class {
  constructor(s5, e8 = 30) {
    this.name = s5, this._counter = 0, this._samples = new Array(e8);
  }
  record(s5) {
    null != s5 && (this._samples[++this._counter % this._samples.length] = s5);
  }
  get median() {
    return this._samples.slice().sort((s5, e8) => s5 - e8)[Math.floor(this._samples.length / 2)];
  }
  get average() {
    return this._samples.reduce((s5, e8) => s5 + e8, 0) / this._samples.length;
  }
  get last() {
    return this._samples[this._counter % this._samples.length];
  }
};

// node_modules/@arcgis/core/core/time.js
function n(n4) {
  return n4;
}
function r(r3) {
  return n(1e3 * r3);
}
function t3(n4) {
  return n4;
}
function u(n4) {
  return t3(1e-3 * n4);
}
function e3() {
  return n(performance.now());
}

// node_modules/@arcgis/core/core/scheduling.js
var c2 = class {
  constructor(e8) {
    this.phases = e8, this.paused = false, this.ticks = -1, this.removed = false;
  }
};
var m = class {
  constructor(e8) {
    this.callback = e8, this.isActive = true;
  }
  remove() {
    this.isActive = false;
  }
};
var l2 = 0;
var p2 = 0;
var u2 = { time: n(0), deltaTime: n(0), elapsedFrameTime: n(0), frameDuration: n(0) };
var f2 = ["prepare", "preRender", "render", "postRender", "update", "finish"];
var h3 = [];
var d = new l();
var w = class {
  constructor(e8) {
    this._task = e8;
  }
  remove() {
    this._task.removed = true;
  }
  pause() {
    this._task.paused = true;
  }
  resume() {
    this._task.paused = false;
  }
};
var k = { frameTasks: d, willDispatch: false, clearFrameTasks: j2, dispatch: b, executeFrameTasks: D };
function v(e8) {
  const r3 = new m(e8);
  return h3.push(r3), k.willDispatch || (k.willDispatch = true, t2(b)), r3;
}
function A(e8) {
  const t7 = new c2(e8);
  return d.push(t7), null == T && (l2 = performance.now(), T = requestAnimationFrame(x)), new w(t7);
}
var T = null;
function j2(e8 = false) {
  d.forAll((e9) => {
    e9.removed = true;
  }), e8 && _();
}
function F(e8) {
  p2 = Math.max(0, e8);
}
function x() {
  const e8 = performance.now();
  T = null, T = d.length > 0 ? requestAnimationFrame(x) : null, k.executeFrameTasks(e8);
}
function D(e8) {
  const t7 = n(e8 - l2);
  l2 = e8;
  const r3 = p2 > 0 ? p2 : 1e3 / 60, s5 = Math.max(0, t7 - r3);
  u2.time = e8, u2.frameDuration = n(r3 - s5);
  for (let o3 = 0; o3 < f2.length; o3++) {
    const r4 = performance.now(), s6 = f2[o3];
    d.forAll((r5) => {
      var _a;
      if (r5.paused || r5.removed)
        return;
      0 === o3 && r5.ticks++;
      r5.phases[s6] && (u2.elapsedFrameTime = n(performance.now() - e8), u2.deltaTime = 0 === r5.ticks ? n(0) : t7, (_a = r5.phases[s6]) == null ? void 0 : _a.call(r5, u2));
    }), R[o3].record(performance.now() - r4);
  }
  _(), q.record(performance.now() - e8);
}
var g = new l();
function _() {
  d.forAll((e8) => {
    e8.removed && g.push(e8);
  }), d.removeUnorderedMany(g.data, g.length), g.clear();
}
function b() {
  for (; h3.length; ) {
    const t7 = p(h3.shift());
    t7.isActive && t7.callback();
  }
  k.willDispatch = false;
}
function y2(e8 = 1, r3) {
  const s5 = C(), i6 = () => {
    a(r3) ? s5.reject(c()) : 0 === e8 ? s5() : (--e8, t2(() => i6()));
  };
  return i6(), s5.promise;
}
var R = f2.map((e8) => new s2(e8));
var q = new s2("total");

// node_modules/@arcgis/core/core/uid.js
var t4 = 0;
var n2 = 0;
function e4() {
  return ++t4;
}

// node_modules/@arcgis/core/core/accessorSupport/tracking/SimpleTrackingTarget.js
var t5 = class {
  constructor(t7) {
    this._accessed = [], this._handles = [], this._observerObject = new e5(t7), s3.register(this, new WeakRef(this._observerObject), this);
  }
  destroy() {
    var _a;
    s3.unregister(this._observerObject), this._accessed.length = 0, (_a = this._observerObject) == null ? void 0 : _a.destroy(), this.clear();
  }
  onObservableAccessed(t7) {
    const e8 = this._accessed;
    e8.includes(t7) || e8.push(t7);
  }
  onTrackingEnd() {
    const t7 = this._handles, e8 = this._accessed, s5 = this._observerObject;
    for (let i6 = 0; i6 < e8.length; ++i6)
      t7.push(e8[i6].observe(s5));
    e8.length = 0;
  }
  clear() {
    const t7 = this._handles;
    for (let e8 = 0; e8 < t7.length; ++e8)
      t7[e8].remove();
    t7.length = 0;
  }
};
var e5 = class {
  constructor(t7) {
    this._notify = t7, this._invalidCount = 0, this.destroyed = false;
  }
  onInvalidated() {
    this._invalidCount++;
  }
  onCommitted() {
    if (this.destroyed)
      return;
    const t7 = this._invalidCount;
    if (1 === t7)
      return this._invalidCount = 0, void this._notify();
    this._invalidCount = t7 > 0 ? t7 - 1 : 0;
  }
  destroy() {
    this.destroyed = true, this._notify = i3;
  }
};
var s3 = new FinalizationRegistry((t7) => {
  var _a;
  (_a = t7.deref()) == null ? void 0 : _a.destroy();
});
function i3() {
}

// node_modules/@arcgis/core/core/accessorSupport/trackingUtils.js
var r2 = false;
var e6 = [];
function o(e8, o3) {
  let u5 = new t5(s5), l4 = null, f4 = false;
  function s5() {
    if (!u5 || f4)
      return;
    if (r2)
      return void i4(s5);
    const t7 = l4;
    u5.clear(), r2 = true, f4 = true, l4 = f(u5, e8), f4 = false, r2 = false, o3(l4, t7), c3();
  }
  function m3() {
    u5 && (u5.destroy(), u5 = null, l4 = null);
  }
  return f4 = true, l4 = f(u5, e8), f4 = false, { remove: m3 };
}
function u3(r3, e8) {
  let o3 = new t5(l4), u5 = null;
  function l4() {
    e8(u5, c4);
  }
  function i6() {
    o3 && (o3.destroy(), o3 = null), u5 = null;
  }
  function c4() {
    return o3 ? (o3.clear(), u5 = f(o3, r3), u5) : null;
  }
  return c4(), { remove: i6 };
}
function l3(e8) {
  let o3 = new t5(l4), u5 = false;
  function l4() {
    o3 && !u5 && (r2 ? i4(l4) : (o3.clear(), r2 = true, u5 = true, f(o3, e8), u5 = false, r2 = false, c3()));
  }
  function f4() {
    o3 && (o3.destroy(), o3 = null);
  }
  return u5 = true, f(o3, e8), u5 = false, { remove: f4 };
}
function i4(n4) {
  e6.includes(n4) || e6.unshift(n4);
}
function c3() {
  for (; e6.length; )
    e6.pop()();
}

// node_modules/@arcgis/core/core/ReentrantObjectPool.js
var t6 = class extends e2 {
  constructor() {
    super(...arguments), this._set = /* @__PURE__ */ new Set();
  }
  destroy() {
    super.destroy(), this._set = i(this._set);
  }
  acquire(...e8) {
    const s5 = super.acquire(...e8);
    return this._set.delete(s5), s5;
  }
  release(e8) {
    e8 && !this._set.has(e8) && (super.release(e8), this._set.add(e8));
  }
  _dispose(e8) {
    this._set.delete(e8), super._dispose(e8);
  }
};

// node_modules/@arcgis/core/core/SetUtils.js
function n3(n4, r3) {
  for (const t7 of n4.entries())
    if (r3(t7[0]))
      return true;
  return false;
}

// node_modules/@arcgis/core/core/accessorSupport/get.js
function e7(t7, e8) {
  const i6 = "?" === t7[t7.length - 1] ? t7.slice(0, -1) : t7;
  if (null != e8.getItemAt || Array.isArray(e8)) {
    const t8 = parseInt(i6, 10);
    if (!isNaN(t8))
      return Array.isArray(e8) ? e8[t8] : e8.at(t8);
  }
  const u5 = e(e8);
  return i2(u5, i6) ? u5.get(i6) : e8[i6];
}
function i5(t7, n4, r3) {
  if (null == t7)
    return t7;
  const u5 = e7(n4[r3], t7);
  return !u5 && r3 < n4.length - 1 ? void 0 : r3 === n4.length - 1 ? u5 : i5(u5, n4, r3 + 1);
}
function u4(n4, r3, u5 = 0) {
  return "string" != typeof r3 || r3.includes(".") ? i5(n4, s(r3), u5) : e7(r3, n4);
}
function o2(t7, n4) {
  return u4(t7, n4);
}
function s4(t7, n4) {
  return void 0 !== u4(n4, t7);
}

// node_modules/@arcgis/core/core/accessorSupport/watch.js
var h4;
!function(e8) {
  e8[e8.Untracked = 0] = "Untracked", e8[e8.Tracked = 1] = "Tracked";
}(h4 || (h4 = {}));
var f3 = class {
  constructor() {
    this.uid = e4(), this.removed = false, this.type = null, this.oldValue = null, this.callback = null, this.getValue = null, this.target = null, this.path = null, this.equals = null;
  }
  static acquireUntracked(e8, r3, o3, l4, i6) {
    return this.pool.acquire(h4.Untracked, e8, r3, o3, l4, i6, j);
  }
  static acquireTracked(e8, t7, r3, o3) {
    return this.pool.acquire(h4.Tracked, e8, t7, r3, null, null, o3);
  }
  notify(e8, t7) {
    this.type === h4.Untracked ? this.callback.call(this.target, e8, t7, this.path, this.target) : this.callback.call(null, e8, t7, void 0, void 0);
  }
  acquire(e8, t7, r3, o3, l4, i6, s5) {
    this.uid = e4(), this.removed = false, this.type = e8, this.oldValue = t7, this.callback = r3, this.getValue = o3, this.target = l4, this.path = i6, this.equals = s5;
  }
  release() {
    this.target = this.path = this.oldValue = this.callback = this.getValue = null, this.uid = e4(), this.removed = true;
  }
};
f3.pool = new t6(f3);
var m2 = new t();
var v2 = /* @__PURE__ */ new Set();
var p3;
function k2(e8) {
  v2.delete(e8), v2.add(e8), p3 || (p3 = v(q2));
}
function _2(e8) {
  if (e8.removed)
    return;
  const t7 = e8.oldValue, r3 = e8.getValue();
  e8.equals(t7, r3) || (e8.oldValue = r3, e8.notify(r3, t7));
}
function g2(e8) {
  for (const t7 of v2.values())
    t7.target === e8 && (t7.removed = true);
}
function q2() {
  let e8 = 10;
  for (; p3 && e8--; ) {
    p3 = null;
    const e9 = j3(), t7 = m2.acquire();
    for (const r3 of e9) {
      const e10 = r3.uid;
      _2(r3), e10 === r3.uid && r3.removed && t7.push(r3);
    }
    for (const r3 of v2)
      r3.removed && (t7.push(r3), v2.delete(r3));
    for (const r3 of t7)
      f3.pool.release(r3);
    m2.release(t7), m2.release(e9), V.forEach((e10) => e10());
  }
}
function j3() {
  const e8 = m2.acquire();
  e8.length = v2.size;
  let t7 = 0;
  for (const r3 of v2)
    e8[t7] = r3, ++t7;
  return v2.clear(), e8;
}
var V = /* @__PURE__ */ new Set();
function y3(e8) {
  return V.add(e8), { remove() {
    V.delete(e8);
  } };
}
function U(e8, t7, r3) {
  let o3 = y(e8, t7, r3, (e9, t8, r4) => {
    let l4, i6, n4 = u3(() => u4(e9, t8), (n5, s5) => {
      e9.__accessor__.destroyed || l4 && l4.uid !== i6 ? o3.remove() : (l4 || (l4 = f3.acquireUntracked(n5, r4, s5, e9, t8), i6 = l4.uid), k2(l4));
    });
    return { remove: h2(() => {
      n4.remove(), l4 && (l4.uid !== i6 || l4.removed || (l4.removed = true, k2(l4)), l4 = null), o3 = n4 = null;
    }) };
  });
  return o3;
}
function b2(e8, r3, o3) {
  const l4 = y(e8, r3, o3, (e9, r4, o4) => {
    let i6 = false;
    return o(() => u4(e9, r4), (n4, s5) => {
      e9.__accessor__.destroyed ? l4.remove() : i6 || (i6 = true, j(s5, n4) || o4.call(e9, n4, s5, r4, e9), i6 = false);
    });
  });
  return l4;
}
function T2(e8, t7, r3, o3 = false) {
  return !e8.__accessor__ || e8.__accessor__.destroyed ? { remove() {
  } } : o3 ? b2(e8, t7, r3) : U(e8, t7, r3);
}
function w2(e8, t7, r3) {
  let o3, l4, i6 = u3(e8, (e9, n4) => {
    o3 && o3.uid !== l4 ? i6.remove() : (o3 || (o3 = f3.acquireTracked(e9, t7, n4, r3), l4 = o3.uid), k2(o3));
  });
  return { remove: h2(() => {
    i6.remove(), o3 && (o3.uid !== l4 || o3.removed || (o3.removed = true, k2(o3)), o3 = null), i6 = null;
  }) };
}
function S(e8, t7, r3) {
  let o3 = false;
  return o(e8, (e9, l4) => {
    o3 || (o3 = true, r3(l4, e9) || t7(e9, l4), o3 = false);
  });
}
function P(e8, t7, o3 = false, l4 = h) {
  return o3 ? S(e8, t7, l4) : w2(e8, t7, l4);
}
function x2(e8) {
  return n3(v2, (t7) => t7.oldValue === e8);
}

export {
  u4 as u,
  o2 as o,
  s4 as s,
  t6 as t,
  s2,
  n,
  r,
  t3 as t2,
  u as u2,
  e3 as e,
  v,
  A,
  F,
  y2 as y,
  n3 as n2,
  n2 as n3,
  e4 as e2,
  t5 as t3,
  l3 as l,
  g2 as g,
  y3 as y2,
  T2 as T,
  P,
  x2 as x
};
//# sourceMappingURL=chunk-FFUMVAL2.js.map
